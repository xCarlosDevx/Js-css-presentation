/*! For license information please see application-4d0e70f8c65512a29207.js.LICENSE.txt */
(self.webpackChunktimetoast=self.webpackChunktimetoast||[]).push([[34],{83992:function(e,t,n){"use strict";n(67121),n(67294);var r=n(5363),o=n.n(r),i=n(36516);n(98449),n(12981),n(44385),n(34893),n(54046),n(28282),n(33368),n(490),n(69984),n(49729),n(95008),(0,i.t9)(),o().start(),window.Timetoast.isReady=!0},38121:function(e,t,n){"use strict";var r=n(5826),o=n(58872),i={};t.Z={createFlag:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a="create-flag-".concat(e,"-").concat(t);if(i[a])return Promise.reject(new Error(o.Z.CALL_ALREADY_IN_PROGRESS));i[a]=!0;var c={flag:{flaggable_id:t,flaggable_type:e},confirmed_spam:n};return r.Z.post("/api/v1/flags",c).finally((function(){delete i[a]}))}}},95008:function(){function e(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function t(t){for(var r=1;r<arguments.length;r++){var o=null!=arguments[r]?arguments[r]:{};r%2?e(Object(o),!0).forEach((function(e){n(t,e,o[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(o)):e(Object(o)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(o,e))}))}return t}function n(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.Timetoast.appUI=t(t({},window.Timetoast.appUI),{},{init:function(e){window.Timetoast.appUI.initMainNavigation(),window.Timetoast.shared.navigations.init()},initMainNavigation:function(){document.querySelector(".js-burger").addEventListener("click",(function(){document.querySelector(".nav-panel__main").classList.toggle("nav-panel__main--open")}))}})},94221:function(e,t,n){"use strict";n.d(t,{qm:function(){return c},y$:function(){return a}});var r=new(n(23502).Z)("editors"),o=r.register,i=r.getItem;function a(e){return i(e)}function c(e,t){"string"!==typeof e&&(e=(t=e).EDITOR_TYPE),o(e,t)}},31609:function(e,t,n){"use strict";n.d(t,{Z:function(){return s}});var r=n(67294),o=n(41993),i=n(16481);function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,"symbol"===typeof(i=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"))?i:String(i)),r)}var o,i}function c(e,t){return c=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},c(e,t)}function u(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=l(e);if(t){var o=l(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function l(e){return l=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},l(e)}var s=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&c(e,t)}(f,e);var t,n,l,s=u(f);function f(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,f),(t=s.call(this,e)).state={authenticityToken:(0,o.Z)()},t}return t=f,(n=[{key:"render",value:function(){var e=this.state.authenticityToken;return r.createElement(i.Z,{name:"authenticity_token",value:e})}}])&&a(t.prototype,n),l&&a(t,l),Object.defineProperty(t,"prototype",{writable:!1}),f}(r.PureComponent)},84882:function(e,t,n){"use strict";n.d(t,{Bp:function(){return a},zn:function(){return c}});var r=new(n(23502).Z)("renderers"),o=r.register,i=r.getItem;function a(e){return i(e)}function c(e,t){"string"!==typeof e&&(e=(t=e).RENDERER_TYPE),o(e,t)}},73959:function(e,t,n){"use strict";n.d(t,{Z:function(){return y}});var r=n(67294),o=n(38121),i=n(37038),a=n(14002);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,m(r.key),r)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=f(e);if(t){var o=f(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return s(e)}(this,n)}}function s(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function f(e){return f=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},f(e)}function p(e,t,n){return(t=m(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(y,e);var t,n,f,m=l(y);function y(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,y),p(s(t=m.call(this,e)),"handleClick",(function(e){e.preventDefault,t.reportSpam()})),p(s(t),"handleSuccess",(function(e){2===(e.status/100|0)?t.setState({status:i.MR}):t.setState({status:i.an})})),p(s(t),"handleError",(function(e){t.setState({status:i.an})})),t.state={status:i.dQ},t}return t=y,(n=[{key:"getTextContent",value:function(){switch(this.state.status){case i.dQ:return"Report spam";case i.Hw:return"Reporting...";case i.an:return"Report failed";case i.MR:return"Reported, thanks!"}}},{key:"reportSpam",value:function(){var e=this,t=this.props,n=t.resourceName,r=t.resourceId;this.setState({status:i.Hw},(function(){o.Z.createFlag(n,r).then(e.handleSuccess,e.handleError)}))}},{key:"render",value:function(){var e=this.state.status,t=this.props.className,n=this.getTextContent();return e===i.dQ?r.createElement(a.Z,{onClick:this.handleClick,className:t,title:"Report this comment as spam"},n):r.createElement("span",{className:t},n)}}])&&c(t.prototype,n),f&&c(t,f),Object.defineProperty(t,"prototype",{writable:!1}),y}(r.Component);y.defaultProps={className:null}},20628:function(e,t,n){"use strict";n.d(t,{Z:function(){return N}});var r=n(59416),o=n(67294),i=(n(73935),n(10593)),a=n(70666),c=n(13311),u=n.n(c),l=n(94993),s=n(88301),f=n(55863),p=n(20036),m=n(65115),y=n(52983),d=n(31287),b=n(33512),v=n(8776),h=n(14002),g=n(33274),w=n(81683),O=n(59074);function E(){return E=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},E.apply(this,arguments)}function j(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(s){l=!0,o=s}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return P(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return P(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function P(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var S=function(e){var t=(0,o.useContext)(w.v);if(void 0===t.can)throw new Error("Casl's can unavailable via context");var n=j((0,o.useState)(!1),2),r=n[0],c=n[1],P=j((0,o.useState)(!1),2),S=P[0],_=P[1],k=j((0,o.useState)([]),2),T=k[0],C=k[1],N=j((0,o.useState)(!1),2),R=N[0],D=N[1],x=j((0,o.useState)(!1),2),Z=x[0],I=x[1];(0,o.useEffect)((function(){r&&V()}),[r]);var L=(0,l.YF)({open:r,onOpenChange:c,placement:"bottom-end",middleware:[(0,s.RR)(),(0,s.uY)()],whileElementsMounted:f.Me}),B=L.refs,A=L.floatingStyles,M=L.context,z=(0,l.bQ)(M),F=(0,l.NI)([z]),U=F.getReferenceProps,$=F.getFloatingProps,V=function(){var t=e.timelineId,n=e.wantedActions;setTimeout((function(){I(!0)}),250),d.Z.checkAbilities(n,"Timeline",t).then((function(e){var t=(0,p.Z)(e);if(200===t.status){var n=t.body;C(n.data),D(!0)}}),(function(e){console.log("Failed to load abilities")}))},H=function(e){c(!1)},q=function(){S?Q():Y()},Y=function(e){H(),_(!0)},Q=function(e){_(!1)},G=function(e){e.preventDefault(),q()},W=function(){var n=e.mode,r=e.timeline;return"edit"===n&&t.can("publishTimelines")?o.createElement("li",{className:"nav-item",key:"publish-switch"},o.createElement(g.Z,{timeline:r})):null},K=function(){var n,i,a,c=e.mode;if(r){var l;l=R&&Z?o.createElement("ul",{className:"unstyled-list"},(n=e.timelineId,i={permissionable_type:"Timeline",permissionable_id:n,result:!0},a=[],u()(T,Object.assign(i,{action:"read"}))&&a.push(o.createElement("li",{className:"nav-item",key:"read"},o.createElement(y.Z,{href:"/timelines/".concat(n)},"View timeline"))),u()(T,Object.assign(i,{action:"edit"}))&&a.push(o.createElement("li",{className:"nav-item",key:"edit"},o.createElement(y.Z,{href:"/timelines/".concat(n,"/edit")},"Edit timeline"))),u()(T,Object.assign(i,{action:"moderate"}))&&a.push(o.createElement("li",{className:"nav-item",key:"moderate"},o.createElement(y.Z,{href:"/timelines/".concat(n,"/moderate")},"Moderate"))),a.push(o.createElement("li",{className:"nav-item",key:"share-trigger"},o.createElement(h.Z,{onClick:G,className:"unbutton popover-menu-button"},"Share"))),a.push(o.createElement("li",{className:"nav-item",key:"print"},o.createElement(y.Z,{href:"/timelines/".concat(n,"?print=1")},"Print"))),t.can("publishTimelines")&&a.push(W()),a)):o.createElement("div",{className:"progress-container"},o.createElement(b.Z,{speed:"fast"}));var s="edit"===c&&t.can("publishTimelines")?"150px":"85px";return o.createElement("div",E({ref:B.setFloating,style:A,className:"popover popover--menu"},$()),o.createElement("div",{style:{width:s}},l))}}(),J=function(){if(S){var t=e.timelineId,n=m.cJ.SharerContainer;return o.createElement(i.Z,{classNames:"modal-in-out",timeout:200},o.createElement(v.Z,{onClose:q,className:"modal modal--full-bleed"},o.createElement(n,{shareableId:t,shareableType:"Timeline"})))}return null}(),X=r?"Less timeline actions":"More timeline actions";return o.createElement("div",null,o.createElement("div",E({ref:B.setReference},U()),o.createElement(O.Z,{className:"unbutton dot-menu-icon min-mobile-hit-area qa-menu-trigger",onClick:function(e){r?H():c(!0)},ariaLabel:X})),K,o.createElement(a.Z,null,J))},_=n(76700),k=n(41521);function T(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function C(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var N=(0,r.$j)((function(e,t){var n=t.timelineId;return function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?T(Object(n),!0).forEach((function(t){C(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({currentUser:(0,k.ts)(e),timeline:(0,_.VS)(e,t,n)},t)}),(function(e){return{}}))(S)},49729:function(e,t,n){"use strict";n.r(t);var r=n(67294),o=n(20745),i=n(59416),a=n(54087),c=n.n(a),u=n(48863),l=n(71658),s=n(50308),f=n.n(s),p=n(94184),m=n.n(p),y=n(13058),d=n(14002);function b(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,E(r.key),r)}}function v(e,t){return v=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},v(e,t)}function h(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=w(e);if(t){var o=w(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return g(e)}(this,n)}}function g(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function w(e){return w=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},w(e)}function O(e,t,n){return(t=E(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function E(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var j=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&v(e,t)}(a,e);var t,n,o,i=h(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),O(g(t=i.call(this,e)),"handleMainMenuDismiss",(function(e){var n=e.target;t.$burgerMenuRef.current.contains(n)||t.$navWrapperRef.current.contains(n)||t.collapseMainMenu()})),O(g(t),"handleSearchLinkClick",(function(e){var n=t.props.onToggleSearch;e.preventDefault(),n(),t.collapseMainMenu()})),O(g(t),"handleBurgerClick",(function(e){e.preventDefault(),t.toggleMainMenu()})),t.state={mainMenuExpanded:!1},t.$burgerMenuRef=(0,r.createRef)(),t.$navWrapperRef=(0,r.createRef)(),t}return t=a,(n=[{key:"expandMainMenu",value:function(){(0,y.TN)(this.handleMainMenuDismiss),this.setState({mainMenuExpanded:!0})}},{key:"collapseMainMenu",value:function(){(0,y.iM)(this.handleMainMenuDismiss),this.setState({mainMenuExpanded:!1})}},{key:"toggleMainMenu",value:function(){this.state.mainMenuExpanded?this.collapseMainMenu():this.expandMainMenu()}},{key:"getNavItems",value:function(){return this.props.options.isLoggedIn?[this.getDashboardLink(),this.getSearchLink(),this.getAccountLink(),this.getSignOutLink()]:[this.getPublishedTimelinesLink(),this.getSearchLink(),this.getSignInLink(),this.getSignUpLink()]}},{key:"getPublishedTimelinesLink",value:function(){var e=this.props.options.categoriesPath;return r.createElement("div",{className:"nav-item",key:"published-timelines"},r.createElement("a",{href:e,title:"Published timelines",className:"nav-item__content"},r.createElement("span",null,"Published timelines")))}},{key:"getSearchLink",value:function(){return r.createElement("div",{className:"nav-item",onClick:this.handleSearchLinkClick,key:"search-link"},r.createElement("a",{href:"/search/timelines",title:"Search published timelines",className:"nav-item__content"},r.createElement("span",null,"Search")))}},{key:"getSignUpLink",value:function(){var e=this.props.options,t=e.isLoggedIn,n=e.plansPath,o=e.isOnSignUpPage;if(!t){var i=o?"Plans":"Sign up",a=o?"Timetoast plans":"Sign up for a Timetoast account";return r.createElement("div",{className:"nav-item nav-item--special",key:"special"},r.createElement("a",{href:n,title:a,className:"nav-item__content"},r.createElement("span",null,i)))}return null}},{key:"getSignInLink",value:function(){var e=this.props.options,t=e.isLoggedIn,n=e.newUserSessionPath;return t?null:r.createElement("div",{className:"nav-item",key:"sign-in-link"},r.createElement("a",{href:n,title:"Sign in to your Timetoast account",className:"nav-item__content"},r.createElement("span",null,"Sign in")))}},{key:"getDashboardLink",value:function(){var e=this.props.options,t=e.isLoggedIn,n=e.timelinesPath;return t?r.createElement("div",{className:"nav-item",key:"dashboard"},r.createElement("a",{href:n,title:"Your dashboard",className:"nav-item__content"},r.createElement("span",null,"Dashboard"))):null}},{key:"getAccountLink",value:function(){var e=this.props.options,t=e.isLoggedIn,n=e.accountPath;return t?r.createElement("div",{className:"nav-item",key:"account"},r.createElement("a",{href:n,title:"Your account",className:"nav-item__content"},r.createElement("span",null,"Account"))):null}},{key:"getSignOutLink",value:function(){var e=this.props.options,t=e.isLoggedIn,n=e.destroyUserSessionPath;return t?r.createElement("div",{className:"nav-item",key:"sign-out"},r.createElement("a",{href:n,title:"Sign out of your Timetoast account",className:"nav-item__content","data-method":"delete",rel:"nofollow"},r.createElement("span",null,"Sign out"))):null}},{key:"componentWillUnmount",value:function(){(0,y.iM)(this.handleMainMenuDismiss)}},{key:"render",value:function(){var e=this.state.mainMenuExpanded,t=m()("site-navigation__navigation-items",{expanded:e,collapsed:!e}),n=this.getNavItems();return r.createElement("div",{className:"site-navigation__content"},r.createElement("div",{className:"mobile-only",ref:this.$burgerMenuRef},r.createElement("div",{className:"site-navigation__burger-container"},r.createElement(d.Z,{onClick:this.handleBurgerClick,title:"Menu",className:"unbutton"},r.createElement("div",{className:"hamburger-icon"},r.createElement("span",{className:"menu-bar"}),r.createElement("span",{className:"menu-bar"}),r.createElement("span",{className:"menu-bar"}))))),r.createElement("div",{className:t},r.createElement("div",{className:"pointer-container"},r.createElement("div",{className:"pointer-arrow pointer-arrow--main"})),r.createElement("div",{className:"site-navigation__nav-wrapper",ref:this.$navWrapperRef},r.createElement("nav",{className:"site-navigation__nav"},r.createElement("div",{className:"nav-list"},n)))))}}])&&b(t.prototype,n),o&&b(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);O(j,"defaultProps",{onToggleSearch:f()});var P={MainNavigationContainer:(0,i.$j)((function(e,t){return t}),(function(e){return{onToggleSearch:function(){var t=l.Nw.toggleVisibility();e(t)}}}))(j)};function S(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?S(Object(n),!0).forEach((function(t){k(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function k(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}window.Timetoast.defaultUI=_(_({},window.Timetoast.defaultUI),{},{init:function(e){window.Timetoast.defaultUI.initMainNavigation("js-main-navigation-target",e),window.Timetoast.defaultUI.initStowawaySiteHeader(),window.Timetoast.shared.navigations.init()},initStowawaySiteHeader:function(){var e,t,n,r="stowaway-header-enabled",o="stowaway-header--animation-enabled",i="stowaway-header--hidden",a="stowaway-header--discreet",u="--header-height",l=function(){return document.getElementById("stowaway-header")},s=l();document.documentElement.style.setProperty(u,s.offsetHeight+"px");var f=Math.round(window.scrollY);if(f>0&&f>50){var p=l();p&&(document.documentElement.style.setProperty(u,p.offsetHeight+"px"),document.body.classList.add(r),p.classList.add(i),p.classList.add(a))}var m=!1;document.addEventListener("scroll",(function(){m||(c()((function(){!function(){var c=Math.round(window.scrollY);f||(f=c),e||(e=c);var s=null;c>e?s="down":c<e&&(s="up"),(s&&s!==t||null===s)&&(n=c);var p=Math.abs(n-c),m=l();if(m)if(m.classList.add(o),document.documentElement.style.setProperty(u,m.offsetHeight+"px"),c>1?document.body.classList.add(r):document.body.classList.remove(r),c>50){m.classList.add(a),m.classList.add(o);var y=p>=40;"up"===s&&y?m.classList.remove(i):"down"===s&&y&&m.classList.add(i)}else m.classList.remove(a);e=c,t=s}(),m=!1})),m=!0)}))},initMainNavigation:function(e,t){var n=document.getElementById(e);if(n){var a=P.MainNavigationContainer;(0,o.s)(n).render(r.createElement(i.zt,{store:u.Z},r.createElement(a,{options:t})))}}})},28282:function(e,t,n){"use strict";n.r(t);var r=n(67294),o=n(20745),i=n(66678),a=n.n(i),c=n(82569),u=n.n(c),l=n(41609),s=n.n(l),f=n(91966),p=n.n(f),m=n(35161),y=n.n(m),d=n(50308),b=n.n(d),v=n(64721),h=n.n(v),g=n(94184),w=n.n(g),O=n(52983),E=n(50740);function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,n)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function T(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,o,i=S(a);function a(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return e=i.call.apply(i,[this].concat(c)),t=_(e),r=function(){var t=e.props,n=t.notification,r=t.checked;(0,t.onSelect)(n,!r)},(n=T(n="handleSelection"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.notification,n=e.checked,o=t.id,i="notification_ids_".concat(o),a=t.is_read?"notification-item--read":"notification-item--unread",c="notifications/".concat(o);return r.createElement("li",{className:w()("notification-item",a)},r.createElement("input",{id:i,name:"notification_ids[]",type:"checkbox",checked:n,value:o,onClick:this.handleSelection,readOnly:!0}),r.createElement(O.Z,{href:c},r.createElement("span",{className:"notification-item__subject",dangerouslySetInnerHTML:{__html:(0,E.$G)(t.subject,50)}}),r.createElement("span",{className:"notification-item__body",dangerouslySetInnerHTML:{__html:(0,E.$G)(t.body,120)}}),r.createElement("span",{className:"notification-item__received-at"},t.listing_date)))}}])&&j(t.prototype,n),o&&j(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component),N=n(16481),R=n(31609);function D(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,B(r.key),r)}}function x(e,t){return x=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},x(e,t)}function Z(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=L(e);if(t){var o=L(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return I(e)}(this,n)}}function I(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L(e){return L=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},L(e)}function B(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var A=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&x(e,t)}(a,e);var t,n,o,i=Z(a);function a(e){var t,n,o,c;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),n=I(t),c=function(e,n){(0,t.props.onSelectNotification)(e,n)},(o=B(o="handleNotificationSelection"))in n?Object.defineProperty(n,o,{value:c,enumerable:!0,configurable:!0,writable:!0}):n[o]=c,t.$formRef=(0,r.createRef)(),t}return t=a,(n=[{key:"getHiddenField",value:function(){var e=this.props.formMethod.toLowerCase();return"delete"===e||"put"===e?r.createElement(N.Z,{name:"_method",value:e}):null}},{key:"getRows",value:function(){var e=this,t=this.props,n=t.notifications,o=t.selectedNotifications;return y()(n,(function(t){var n=h()(o,t);return r.createElement(C,{notification:t,checked:n,onSelect:e.handleNotificationSelection,key:t.id,readOnly:!0})}))}},{key:"submit",value:function(){return this.$formRef.current.submit()}},{key:"render",value:function(){if(0===this.props.notifications.length)return r.createElement("div",{className:"panel-section"},"You don't have any notifications.");var e=this.props.formAction,t=this.getRows(),n=this.getHiddenField();return r.createElement("form",{className:"notifications-form",action:e,method:"post",ref:this.$formRef},n,r.createElement(R.Z,null),r.createElement("ul",{className:"unstyled-list notifications-list"},t))}}])&&D(t.prototype,n),o&&D(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);A.defaultProps={onSelectNotification:b()};var M=n(14002);function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}(this,n)}}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function H(e,t,n){return(t=q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(c,e);var t,n,o,i=U(c);function c(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,c),H($(t=i.call(this,e)),"onSelectNotification",(function(e,n){var r=t.state.selectedNotifications,o=[];o=n?a()(r).concat([e]):u()(r,e),t.setState({selectedNotifications:o})})),H($(t),"handleSelectAllClick",(function(e){var n=t.props.notifications,r=e.currentTarget.checked?n:[];t.setState({selectedNotifications:r})})),H($(t),"handleTrashSelectedClick",(function(e){t.setState({formAction:t.props.bulkDeleteNotificationsPath,formMethod:"DELETE"},t.submitForm)})),H($(t),"handleReadSelectedClick",(function(e){t.setState({formAction:t.props.bulkReadNotificationsPath,formMethod:"PUT"},t.submitForm)})),H($(t),"handleUnreadSelectedClick",(function(e){t.setState({formAction:t.props.bulkUnreadNotificationsPath,formMethod:"PUT"},t.submitForm)})),t.state={selectedNotifications:[],formAction:"#",formMethod:"POST"},t.$notificationsListRef=(0,r.createRef)(),t}return t=c,(n=[{key:"submitForm",value:function(){this.$notificationsListRef.current.submit()}},{key:"getNumberOfNotificationsText",value:function(e){return 1===e?"1 notification":"".concat(e," notifications")}},{key:"render",value:function(){var e=this.props.notifications,t=this.state.selectedNotifications,n=!s()(e)&&s()(p()(e,t)),o=e.length,i=0===o,a=0===t.length,c=this.getNumberOfNotificationsText(o);return r.createElement("div",{className:"panel-section panel-section--padded"},r.createElement("h3",{className:"zeta"},"You have ",c),r.createElement("div",{className:"list-controls"},r.createElement("div",{className:"list-controls__item control-small--select-all-form checkbox-container checkbox-container--single"},r.createElement("input",{className:"toggle-checkbox-selection-checkbox",type:"checkbox",checked:n,readOnly:!0,onClick:this.handleSelectAllClick,disabled:i})),r.createElement(M.Z,{className:"list-controls__item control",onClick:this.handleTrashSelectedClick,disabled:a},"Trash"),r.createElement(M.Z,{className:"list-controls__item control",onClick:this.handleReadSelectedClick,disabled:a},"Mark as read"),r.createElement(M.Z,{className:"list-controls__item control",onClick:this.handleUnreadSelectedClick,disabled:a},"Mark as unread")),r.createElement(A,{ref:this.$notificationsListRef,notifications:e,formAction:this.state.formAction,formMethod:this.state.formMethod,selectedNotifications:t,onSelectNotification:this.onSelectNotification}))}}])&&z(t.prototype,n),o&&z(t,o),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component),Q=n(41226);window.Timetoast.notifications={index:{init:function(e,t){var n=e.bulkDeleteNotificationsPath,i=e.bulkReadNotificationsPath,a=e.bulkUnreadNotificationsPath,c=e.notificationsDOMId,u=(0,Q.loadJSONFromDOMNode)(c);(0,o.s)(t).render(r.createElement(Y,{notifications:u,bulkDeleteNotificationsPath:n,bulkReadNotificationsPath:i,bulkUnreadNotificationsPath:a}))}}}},54046:function(e,t,n){"use strict";n.r(t);var r=n(67294),o=n(20745),i=n(59416),a=n(48863),c=n(63657);var u=n(45397),l=n(33512),s=(0,r.lazy)((function(){return n.e(436).then(n.bind(n,64436)).then((function(e){return{default:e.PeopleContainer}}))}));window.Timetoast.people={index:{init:function(e,t){var n;a.Z.dispatch((n=e.endpoints,{type:c.Z.RECEIVE_ENDPOINTS,payload:n})),(0,u.hydrateCurrentUser)(),(0,u.hydrateGroupsFromDOMNode)(e.user.groupsDOMId),(0,u.hydrateUsersFromDOMNode)(e.user.usersDOMId),(0,o.s)(t).render(r.createElement(i.zt,{store:a.Z},r.createElement(r.Suspense,{fallback:r.createElement(l.Z,{size:"large"})},r.createElement(s,{options:e}))))}}}},69984:function(e,t,n){"use strict";n.r(t);var r=n(67294),o=n(20745),i=n(59416),a=n(48863),c=n(33512);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){s(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var f=(0,r.lazy)((function(){return n.e(526).then(n.bind(n,70526)).then((function(e){return{default:e.DatabaseContainer}}))})),p=(0,r.lazy)((function(){return n.e(526).then(n.bind(n,70526)).then((function(e){return{default:e.DatabasesContainer}}))}));window.Timetoast.projects=l(l({},window.Timetoast.projects),{},{index:{init:function(){(0,o.s)(document.getElementById("react-target")).render(r.createElement(i.zt,{store:a.Z},r.createElement(r.Suspense,{fallback:r.createElement(c.Z,{size:"large"})},r.createElement(p,null))))}},show:{init:function(e){var t=e.databaseId;(0,o.s)(document.getElementById("react-target")).render(r.createElement(i.zt,{store:a.Z},r.createElement(r.Suspense,{fallback:r.createElement(c.Z,{size:"large"})},r.createElement(f,{databaseId:t}))))}},edit:{init:function(e){var t=e.databaseId;(0,o.s)(document.getElementById("react-target")).render(r.createElement(i.zt,{store:a.Z},r.createElement(r.Suspense,{fallback:r.createElement(c.Z,{size:"large"})},r.createElement(f,{databaseId:t}))))}}})},36516:function(e,t,n){"use strict";n.d(t,{Y8:function(){return Fe},t9:function(){return ze}});var r=n(27361),o=n.n(r),i=n(94221),a=n(67294);function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,f(r.key),r)}}function u(e,t){return u=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},u(e,t)}function l(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=s(e);if(t){var o=s(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function s(e){return s=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},s(e)}function f(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var p,m,y,d=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&u(e,t)}(i,e);var t,n,r,o=l(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,(n=[{key:"render",value:function(){return a.createElement("div",{className:"field-editor"},"TBI")}}])&&c(t.prototype,n),r&&c(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);p=d,y="numeric",(m=f(m="EDITOR_TYPE"))in p?Object.defineProperty(p,m,{value:y,enumerable:!0,configurable:!0,writable:!0}):p[m]=y;var b=n(50308),v=n.n(b),h=n(18446),g=n.n(h),w=n(57463);function O(){return O=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O.apply(this,arguments)}function E(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,T(r.key),r)}}function j(e,t){return j=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},j(e,t)}function P(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_(e);if(t){var o=_(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return S(e)}(this,n)}}function S(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function _(e){return _=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_(e)}function k(e,t,n){return(t=T(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function T(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var C=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(i,e);var t,n,r,o=P(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),k(S(t=o.call(this,e)),"handleBlur",(function(e){})),k(S(t),"handleKeyDown",(function(e){})),k(S(t),"handleChange",(function(e){var n=t.props,r=n.name,o=n.onChange,i=e.value;t.setState({currentValue:i}),o!==v()&&o({name:r,value:i})}));var n=e.value||"";return t.state={currentValue:n,initialValue:n},t}return t=i,(n=[{key:"defaultValue",value:function(){return""}},{key:"getButtonsContent",value:function(){var e=this.props,t=e.confirmChanges,n=e.saveButton,r=e.cancelButton;if(t){var o=this.state,i=o.initialValue,c=o.currentValue,u=!g()(i,c);return a.createElement("div",{className:"field-editor__buttons"},u&&n,r)}}},{key:"render",value:function(){var e=this.state.currentValue;return a.createElement("div",{className:"field-editor"},a.createElement(w.Z,O({},this.props,{onChange:this.handleChange,onBlur:this.handleBlur,onKeyDown:this.handleKeyDown,value:e})),this.getButtonsContent())}}])&&E(t.prototype,n),r&&E(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);k(C,"EDITOR_TYPE","string"),C.defaultProps={onChange:v(),confirmChanges:!1};var N=n(38094),R=n(52983),D=n(98977),x=n(14002);n(42869);function Z(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(s){l=!0,o=s}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return I(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return I(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function I(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var L=function(e){var t=e.value,n=Z((0,a.useState)(t||{day:"",month:"",year:"",isBCE:!1}),2),r=n[0],o=n[1];return a.createElement("div",{className:e.className},a.createElement(D.Z,{key:"picker",value:r,onChange:function(e){o(e.value)}}),a.createElement(x.Z,{key:"ok",className:"btn",onClick:function(t){var n=e.name;(0,e.onSelect)({name:n,value:r})}},"OK"))},B=L;L.defaultProps={onSelect:v(),className:"date-selector"};var A=n(87570);function M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function z(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?M(Object(n),!0).forEach((function(t){q(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):M(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Y(r.key),r)}}function U(e,t){return U=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},U(e,t)}function $(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=H(e);if(t){var o=H(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return V(e)}(this,n)}}function V(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function H(e){return H=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},H(e)}function q(e,t,n){return(t=Y(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Y(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Q=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&U(e,t)}(i,e);var t,n,r,o=$(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),q(V(t=o.call(this,e)),"handleChange",(function(e){var n=t.props,r=n.name,o=n.onChange,i=e.value;i&&""===i.day&&""===i.month&&""===i.year&&(i=null);var a=z(z({},t.state.currentValue),{},q({},e.name,i)),c=z(z({},t.state),{},{currentValue:a});t.setState(z(z({},c),{},{pickingPropertyName:null})),o!==v()&&o({name:r,value:t.convertToReturnValue(c.currentValue)})})),q(V(t),"handleStartPickingStartDate",(function(e){e.preventDefault(),t.setPickingPropertyName("s")})),q(V(t),"handleStartPickingEndDate",(function(e){e.preventDefault(),t.setPickingPropertyName("e")})),q(V(t),"setPickingPropertyName",(function(e){t.setState({pickingPropertyName:e})})),q(V(t),"currentlyPicking",(function(){return null!==t.state.pickingPropertyName})),q(V(t),"getButtonsContent",(function(){var e=t.props,n=e.saveButton,r=e.cancelButton,o=t.state,i=o.initialValue,c=o.currentValue,u=!g()(i,c);if(u)return a.createElement("div",{className:"field-editor__buttons"},u&&n,r)})),q(V(t),"getPickingContent",(function(){var e,n=t.state,r=n.currentValue,o=n.pickingPropertyName,i=r[o];switch(o){case"s":e="Start";break;case"e":e="End"}return a.createElement(B,{value:i,name:o,label:e,onSelect:t.handleChange,className:"timeline-field-editor__date-selector"})})),q(V(t),"getDefaultContent",(function(){var e=t.state.currentValue,n=e.s,r=e.e,o=n?(0,A.x)(n):null,i=r?(0,A.x)(r):null,c=o?a.createElement(N.Z,{dateTime:o}):"Pick start date",u=i?a.createElement(N.Z,{dateTime:i}):"Pick end date";return a.createElement(a.Fragment,null,a.createElement("div",{className:"timeline-field-editor__dates"},a.createElement(R.Z,{href:"#",onClick:t.handleStartPickingStartDate},c),"-",a.createElement(R.Z,{href:"#",onClick:t.handleStartPickingEndDate},u)),t.getButtonsContent())}));var n={s:null,e:null};return e.value&&(e.value.s&&(n.s=(0,A.N)(e.value.s)),e.value.e&&(n.e=(0,A.N)(e.value.e))),t.state={currentValue:n,initialValue:n,pickingPropertyName:null},t}return t=i,(n=[{key:"convertToReturnValue",value:function(e){var t={e:null,s:null};return e.s&&(t.s=(0,A.x)(e.s)),e.e&&(t.e=(0,A.x)(e.e)),t}},{key:"render",value:function(){var e=this.currentlyPicking()?this.getPickingContent():this.getDefaultContent();return a.createElement("div",{className:"field-editor timeline-field-editor"},e)}}])&&F(t.prototype,n),r&&F(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);q(Q,"EDITOR_TYPE","timeline"),Q.defaultProps={onChange:v(),confirmChanges:!1};var G=function(e){var t=null;return e&&(t=parseInt(e.replace("photo_",""))),t},W=n(57354),K=n(38470);function J(){return J=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},J.apply(this,arguments)}function X(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ie(r.key),r)}}function ee(e,t){return ee=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ee(e,t)}function te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=re(e);if(t){var o=re(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ne(e)}(this,n)}}function ne(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function re(e){return re=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},re(e)}function oe(e,t,n){return(t=ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ie(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var ae=(0,W.Z)(K.Z),ce=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ee(e,t)}(i,e);var t,n,r,o=te(i);function i(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),oe(ne(t=o.call(this,e)),"handleBlur",(function(e){})),oe(ne(t),"handleKeyDown",(function(e){})),oe(ne(t),"handleChange",(function(e){var n=t.props,r=n.name,o=n.onChange,i=e.value,a=null==i?null:"photo_".concat(i);t.setState({currentValue:a}),o!==v()&&o({name:r,value:a})}));var n=e.value;return t.state={currentValue:n,initialValue:n},t}return t=i,(n=[{key:"getButtonsContent",value:function(){var e=this.props,t=e.confirmChanges,n=e.saveButton,r=e.cancelButton;if(t){var o=this.state,i=o.initialValue,c=o.currentValue,u=!g()(i,c);return a.createElement("div",{className:"field-editor__buttons",key:"buttons"},u&&n,r)}}},{key:"render",value:function(){var e=this.props.thumbnailStyle,t=this.state.currentValue,n=G(t);return a.createElement("div",{className:"field-editor"},a.createElement(ae,J({key:"media_picker"},this.props,{value:n,onChange:this.handleChange,thumbnailStyle:e,apiVersion:2})),this.getButtonsContent())}}])&&X(t.prototype,n),r&&X(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);oe(ce,"EDITOR_TYPE","photo"),ce.defaultProps={onChange:v(),confirmChanges:!1,thumbnailStyle:"small_square"};var ue=function(){(0,i.qm)(d),(0,i.qm)(C),(0,i.qm)(Q),(0,i.qm)(ce)},le=n(84882);function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ye(r.key),r)}}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var o=me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(e)}function ye(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var de=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(i,e);var t,n,r,o=pe(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"render",value:function(){var e=this.props.value;return a.createElement(a.Fragment,null,e)}}],n&&se(t.prototype,n),r&&se(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);function be(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,we(r.key),r)}}function ve(e,t){return ve=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ve(e,t)}function he(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ge(e);if(t){var o=ge(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function ge(e){return ge=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ge(e)}function we(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}!function(e,t,n){(t=ye(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(de,"RENDERER_TYPE","numeric");var Oe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ve(e,t)}(i,e);var t,n,r,o=he(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"render",value:function(){var e=this.props.value;return a.createElement(a.Fragment,null,e)}}],n&&be(t.prototype,n),r&&be(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);function Ee(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function je(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Te(r.key),r)}}function Pe(e,t){return Pe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Pe(e,t)}function Se(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=_e(e);if(t){var o=_e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function _e(e){return _e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},_e(e)}function ke(e,t,n){return(t=Te(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Te(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}!function(e,t,n){(t=we(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Oe,"RENDERER_TYPE","string");var Ce=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Pe(e,t)}(i,e);var t,n,r,o=Se(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"render",value:function(){var e=function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Ee(Object(n),!0).forEach((function(t){ke(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Ee(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({s:null,e:null},this.props.value),t=e.s,n=e.e,r=null;return n&&(r=a.createElement(a.Fragment,null,a.createElement("span",null," - "),a.createElement(N.Z,{dateTime:n}))),a.createElement(a.Fragment,null,t&&a.createElement(N.Z,{dateTime:t}),r)}}],n&&je(t.prototype,n),r&&je(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);ke(Ce,"RENDERER_TYPE","timeline");var Ne=n(73395);function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ie(r.key),r)}}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}function xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);if(t){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}function Ie(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Le=(0,W.Z)(Ne.Z),Be=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}(i,e);var t,n,r,o=xe(i);function i(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),o.apply(this,arguments)}return t=i,n=[{key:"render",value:function(){var e=this.props.value;if(e){var t=G(e);return a.createElement(Le,{key:"photo_preview",value:t,thumbnailStyle:"small_square"})}return null}}],n&&Re(t.prototype,n),r&&Re(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(a.Component);!function(e,t,n){(t=Ie(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}(Be,"RENDERER_TYPE","photo");var Ae=function(){(0,le.zn)(de),(0,le.zn)(Oe),(0,le.zn)(Ce),(0,le.zn)(Be)},Me={TextField:"string",NumberField:"numeric",TimelineField:"timeline",PhotoField:"photo"};function ze(){ue(),Ae()}var Fe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Me;return o()(t,[e])||"string"}},33368:function(e,t,n){"use strict";n.r(t);var r=n(67294),o=n(20745),i=n(59416),a=n(97894),c=n(84486),u=n.n(c),l=n(64487),s=n(64721),f=n.n(s),p=n(63105),m=n.n(p),y=n(35161),d=n.n(y),b=n(50308),v=n.n(b),h=n(14002),g=n(49959);function w(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,S(r.key),r)}}function O(e,t){return O=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},O(e,t)}function E(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=P(e);if(t){var o=P(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return j(e)}(this,n)}}function j(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function P(e){return P=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},P(e)}function S(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var _=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&O(e,t)}(a,e);var t,n,o,i=E(a);function a(){var e,t,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var o=arguments.length,c=new Array(o),u=0;u<o;u++)c[u]=arguments[u];return e=i.call.apply(i,[this].concat(c)),t=j(e),r=function(t){var n=e.props,r=n.id,o=n.onDismiss;t.preventDefault(),o(r)},(n=S(n="handleDismiss"))in t?Object.defineProperty(t,n,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[n]=r,e}return t=a,(n=[{key:"render",value:function(){var e=this.props.message;return r.createElement("div",{className:"announcement"},r.createElement("div",{className:"announcement__body"},e),r.createElement("div",{className:"announcement__dismiss"},r.createElement(h.Z,{onClick:this.handleDismiss,className:"unbutton dismiss-button",title:"Close"},r.createElement(g.Z,{xlinkHref:"#streamline-core-line-delete-1",alt:"Dismiss",pointerEvents:"none",className:"no-fill"}))))}}])&&w(t.prototype,n),o&&w(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);function k(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,D(r.key),r)}}function T(e,t){return T=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},T(e,t)}function C(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=R(e);if(t){var o=R(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return N(e)}(this,n)}}function N(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function R(e){return R=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},R(e)}function D(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}_.defaultProps={id:null,message:"",onDismiss:v()};var x=n(10646),Z=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&T(e,t)}(a,e);var t,n,o,i=C(a);function a(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),n=N(t),o=function(e){t.storeId(e)},(r=D(r="handleDismiss"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.COOKIE_NAME="dismissedAnnouncements",t.state={dismissedIds:t.getDismissedIds()},t}return t=a,(n=[{key:"storeId",value:function(e){if(null!=e&&!this.isIdStored()){var t=this.getDismissedIds();t.push(e.toString()),x.set(this.COOKIE_NAME,t.join(",")),this.setState({dismissedIds:t})}}},{key:"isIdStored",value:function(e){return e?f()(this.getDismissedIds(),e.toString()):null}},{key:"getDismissedIds",value:function(){var e=x.get(this.COOKIE_NAME);return e?e.split(","):[]}},{key:"getUndismissedAnnouncements",value:function(){var e=this,t=this.props.options.announcements;return m()(t,(function(t){return!e.isIdStored(t.id)}))}},{key:"render",value:function(){var e=this,t=this.getUndismissedAnnouncements();return t.length>0?r.createElement("div",null,d()(t,(function(t){return r.createElement(_,{key:"announcement_"+t.id,message:t.message,id:t.id,onDismiss:e.handleDismiss})}))):null}}])&&k(t.prototype,n),o&&k(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component),I=n(38121),L=n(13058),B=n(11327),A=n(94308),M=n(83038),z=n(58872),F=n(5826),U={},$=function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],i="post-spam-ham-".concat(t,"-").concat(e);if(U[i])return Promise.reject(new Error(z.Z.CALL_ALREADY_IN_PROGRESS));U[i]=!0;var a={spammable_id:e,spammable_type:t,spam_or_ham:n,create_flag:r,training:o};return F.Z.post("/api/v1/spam_hams",a).finally((function(){delete U[i]}))},V=n(37038),H=n(20036);function q(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,J(r.key),r)}}function Y(e,t){return Y=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Y(e,t)}function Q(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=W(e);if(t){var o=W(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return G(e)}(this,n)}}function G(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W(e){return W=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},W(e)}function K(e,t,n){return(t=J(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var X=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Y(e,t)}(a,e);var t,n,o,i=Q(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),K(G(t=i.call(this,e)),"handleSubmit",(function(e){t.submitHamSpam()})),t.state={submitStatus:V.ZP.UNSTARTED,message:null},t}return t=a,n=[{key:"setSubmitStatus",value:function(e){this.setState({submitStatus:e})}},{key:"setMessage",value:function(e){this.setState({message:e})}},{key:"submitHamSpam",value:function(){var e=this,t=this.props,n=t.spammableId,r=t.spammableType,o=t.createFlag,i=t.spamOrHam,a=t.training;this.setSubmitStatus(V.ZP.STARTED),$(n,r,i,o,a).then((function(t){var n=(0,H.Z)(t);e.setSubmitStatus(V.ZP.SUCCESS),e.setMessage(n.body.message)}),(function(t){t.message!==z.Z.CALL_ALREADY_IN_PROGRESS&&((0,H.Z)(t.response),e.setSubmitStatus(V.ZP.FAILURE),e.setMessage("Error"))}))}},{key:"getButtonContent",value:function(){var e=this.props,t=e.className,n=e.label,o=this.state.submitStatus,i=o===V.ZP.UNSTARTED?this.handleSubmit:null,a=o===V.ZP.STARTED;return r.createElement(M.Z,{onClick:i,disabled:a,className:t},n)}},{key:"render",value:function(){var e=this.state,t=e.submitStatus,n=e.message;switch(t){case V.ZP.UNSTARTED:case V.ZP.STARTED:return this.getButtonContent();case V.ZP.SUCCESS:case V.ZP.FAILURE:return r.createElement("span",null,n)}}}],n&&q(t.prototype,n),o&&q(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);K(X,"defaultProps",{createFlag:!1,training:!1});var ee=n(73959),te=n(15272);function ne(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,ue(r.key),r)}}function re(e,t){return re=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},re(e,t)}function oe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ae(e);if(t){var o=ae(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ie(e)}(this,n)}}function ie(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ae(e){return ae=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ae(e)}function ce(e,t,n){return(t=ue(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ue(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var le=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&re(e,t)}(a,e);var t,n,o,i=oe(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),ce(ie(t=i.call(this,e)),"handleClick",(function(e){e.preventDefault(),t.deleteUser()})),ce(ie(t),"handleSuccess",(function(e){2===(e.status/100|0)?t.setState({status:V.ZP.SUCCESS}):t.setState({status:V.ZP.FAILURE})})),ce(ie(t),"handleError",(function(e){t.setState({status:V.ZP.FAILURE})})),t.state={status:V.ZP.UNSTARTED},t}return t=a,(n=[{key:"getTextContent",value:function(){switch(this.state.status){case V.ZP.UNSTARTED:return"Delete user";case V.ZP.STARTED:return"Deleting...";case V.ZP.FAILURE:return"Delete failed";case V.ZP.SUCCESS:return"Queued for deletion"}}},{key:"deleteUser",value:function(){var e=this,t=this.props.userId;this.setState({status:V.ZP.STARTED},(function(){te.Z.deleteUser(t).then(e.handleSuccess,e.handleError)}))}},{key:"render",value:function(){var e=this.state.status,t=this.props.className,n=this.getTextContent();return e===V.ZP.UNSTARTED?r.createElement(h.Z,{onClick:this.handleClick,className:t,title:"Delete user"},n):r.createElement("span",{className:t},n)}}])&&ne(t.prototype,n),o&&ne(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,be(r.key),r)}}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ye(e);if(t){var o=ye(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return me(e)}(this,n)}}function me(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ye(e){return ye=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ye(e)}function de(e,t,n){return(t=be(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function be(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}ce(le,"defaultProps",{className:null});var ve=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(a,e);var t,n,o,i=pe(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),de(me(t=i.call(this,e)),"handleCheckBoxChange",(function(e){var n=e.checked;t.setState({training:n})})),t.state={training:e.training},t}return t=a,(n=[{key:"getUserDeleterContent",value:function(){var e=this.props,t=e.spammableType,n=e.spammableId;return"User"!==t?null:r.createElement(le,{userId:n,className:"btn spammable-actions__action"})}},{key:"render",value:function(){var e=this.state.training,t=this.props,n=t.spammableId,o=t.spammableType,i=t.className,a=this.getUserDeleterContent();return r.createElement("div",{className:i},r.createElement("ul",{className:"unstyled-list"},r.createElement("li",{className:"spammable-actions__item"},r.createElement(A.Z,{className:"spammable-actions__action"},r.createElement(B.Z,{checked:e,onChange:this.handleCheckBoxChange})," Add to training corpus")),r.createElement("li",{className:"spammable-actions__item"},r.createElement(X,{spammableId:n,spammableType:o,spamOrHam:"ham",training:e,label:"Mark ham",className:"btn spammable-actions__action"})),r.createElement("li",{className:"spammable-actions__item"},r.createElement(X,{spammableId:n,spammableType:o,spamOrHam:"spam",training:e,label:"Mark spam",className:"btn spammable-actions__action"})),r.createElement("li",{className:"spammable-actions__item"},r.createElement(ee.Z,{resourceId:n,resourceName:o,className:"btn spammable-actions__action"})),r.createElement("li",{className:"spammable-actions__item"},a)))}}])&&se(t.prototype,n),o&&se(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);de(ve,"defaultProps",{training:!1,className:"spammable-actions"});var he=n(88301),ge=n(34433),we=function(e){var t,n,o,i=(t=e.spammableLocked?"Manage spam &#128274;":"Manage spam",r.createElement(h.Z,{className:"unbutton"},r.createElement("span",{dangerouslySetInnerHTML:{__html:t}}))),a=(n=e.spammableId,o=e.spammableType,r.createElement("div",{className:"popover--opaque top-bar__popover"},r.createElement(ve,{spammableId:n,spammableType:o})));return r.createElement(ge.Z,{placement:"bottom",middleware:[(0,he.cv)({mainAxis:10,crossAxis:-20}),(0,he.RR)(),(0,he.uY)()]},r.createElement(ge.Z.Reference,{className:"top-bar__item"},i),r.createElement(ge.Z.Content,{className:"popover"},a))},Oe=n(41226),Ee=n(6617),je=n(48863),Pe=n(56807),Se=n(26656),_e=n.n(Se),ke=n(57342);function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Ce(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Ne(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ne(e,t,n){return(t=De(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,De(r.key),r)}}function De(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}function xe(e,t){return xe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},xe(e,t)}function Ze(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ie(e);if(t){var o=Ie(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ie(e){return Ie=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ie(e)}var Le=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&xe(e,t)}(a,e);var t,n,o,i=Ze(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).addedToasts={},t.$notificationSystemRef=(0,r.createRef)(),t}return t=a,n=[{key:"system",value:function(){return this.$notificationSystemRef.current}},{key:"componentDidUpdate",value:function(e,t,n){var r=this,o=this.props.toasts,i=d()(o,(function(e){return e.uid})),a=this.system().state.notifications||[];o.length>0&&(u()(a,(function(e){i.indexOf(e.uid)<0&&r.system().removeNotification(e.uid)})),this.addNotifications(o)),e.toasts!==o&&0===o.size&&this.system().clearNotifications()}},{key:"addNotifications",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];u()(t,(function(t){e.addNotification(t)}))}},{key:"addNotification",value:function(e){var t=this;if(!e.message||!e.level)throw new Error("Expected toast to have a message and a level");this.system()&&this.system().addNotification(Ce(Ce({},e),{},{onRemove:function(){(0,t.props.onRemoveToast)(e.uid),e.onRemove&&e.onRemove()}}))}},{key:"render",value:function(){return r.createElement(_e(),{ref:this.$notificationSystemRef,style:!1})}}],n&&Re(t.prototype,n),o&&Re(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);var Be=(0,i.$j)((function(e){return{toasts:e.data.toasts}}),(function(e,t){return{onRemoveToast:function(t){e((0,ke.RS)(t))}}}))(Le),Ae=n(94184),Me=n.n(Ae),ze=n(45194);function Fe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,He(r.key),r)}}function Ue(e,t){return Ue=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Ue(e,t)}function $e(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ve(e);if(t){var o=Ve(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ve(e){return Ve=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ve(e)}function He(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var qe,Ye,Qe,Ge=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ue(e,t)}(a,e);var t,n,o,i=$e(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"componentDidMount",value:function(){var e=this.props,t=e.url,n=e.wait;setTimeout((function(){window.location.href=t}),n)}},{key:"render",value:function(){var e=this.props,t=e.message,n=e.type,o=Me()("flash-notification","flash-notification--".concat(n),"flash-notification--redirector");return r.createElement("div",{className:o},r.createElement("div",{className:"redirector__spinner"},r.createElement(ze.Z,null)),r.createElement("div",{className:"redirector__text"},t))}}])&&Fe(t.prototype,n),o&&Fe(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Ke(r.key),r)}}function Ke(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}qe=Ge,Qe={type:"notice",wait:3e3},(Ye=He(Ye="defaultProps"))in qe?Object.defineProperty(qe,Ye,{value:Qe,enumerable:!0,configurable:!0,writable:!0}):qe[Ye]=Qe;var Je=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),Object.assign(this,{paymentErrors:[],stripe:null,formQuerySelector:".js_subscription-form",submitQuerySelector:".js_commit-button",paymentErrorExplanationQuerySelector:".js-payment-error-explanation",paymentErrorsQuerySelector:".js-errors-target"},t)}var t,n,r;return t=e,(n=[{key:"init",value:function(){this.storeReferences()}},{key:"storeReferences",value:function(){this.$form=document.querySelector(this.formQuerySelector),this.$paymentErrorExplanation=this.$form.querySelector(this.paymentErrorExplanationQuerySelector)}},{key:"updatePaymentErrors",value:function(){var e=this.$paymentErrorExplanation.querySelector(this.paymentErrorsQuerySelector);if(e.innerHTML="",this.paymentErrors.length>0){var t=document.createElement("ul");u()(this.paymentErrors,(function(e){var n=document.createElement("li");n.textContent=e,t.appendChild(n)})),e.append(t),this.$paymentErrorExplanation.classList.remove("hidden")}else this.$paymentErrorExplanation.classList.add("hidden")}},{key:"enableSubmit",value:function(){var e=this.$form.querySelector(this.submitQuerySelector);e.innerHTML=this.originalSubmitText,e.removeAttribute("disabled")}},{key:"disableSubmit",value:function(){var e=this.$form.querySelector(this.submitQuerySelector),t=e.dataset.disableWith||"Please wait...";e.innerHTML=t,e.setAttribute("disabled",!0)}}])&&We(t.prototype,n),r&&We(t,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function Xe(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,at(r.key),r)}}function et(){return et="undefined"!==typeof Reflect&&Reflect.get?Reflect.get.bind():function(e,t,n){var r=function(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=ot(e)););return e}(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},et.apply(this,arguments)}function tt(e,t){return tt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},tt(e,t)}function nt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ot(e);if(t){var o=ot(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return rt(e)}(this,n)}}function rt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ot(e){return ot=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ot(e)}function it(e,t,n){return(t=at(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function at(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var ct=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&tt(e,t)}(i,e);var t,n,r,o=nt(i);function i(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,i),it(rt(e=o.call(this,t)),"handleCardChange",(function(t){t.error?e.paymentErrors=[t.error.message]:e.paymentErrors=[],e.updatePaymentErrors()})),it(rt(e),"handleSubmit",(function(t){t.preventDefault(),e.disableSubmit();var n=e.getTokenData();e.stripe.createToken(e.stripeCard,n).then((function(t){t.error?(e.paymentErrors=[t.error.message],e.updatePaymentErrors(),e.enableSubmit()):(e.paymentErrors=[],e.updatePaymentErrors(),e.submitFormWithToken(t.token))}),(function(e){l.Tb(e)}))})),Object.assign(rt(e),{cardElementQuerySelector:".js-card-element",addressQuerySelector:".js-address",cardTokenQuerySelector:".js-stripe_card_token"},t),e}return t=i,(n=[{key:"init",value:function(){if(this.storeReferences(),!this.referencesValid())throw new Error("There are missing references");var e=this.$form.querySelector(this.submitQuerySelector);this.originalSubmitText=e.innerHTML,this.initCardElement(),this.updatePaymentErrors(),this.$form.addEventListener("submit",this.handleSubmit)}},{key:"storeReferences",value:function(){et(ot(i.prototype),"storeReferences",this).call(this),this.$cardElement=this.$form.querySelector(this.cardElementQuerySelector),this.$billingAddress=this.$form.querySelector(this.addressQuerySelector),this.$cardTokenInput=this.$form.querySelector(this.cardTokenQuerySelector)}},{key:"submitFormWithToken",value:function(e){this.$cardTokenInput.setAttribute("value",e.id),this.$form.submit()}},{key:"initCardElement",value:function(){var e=this.stripe.elements().create("card",{style:this.getCardStyle()});e.mount(this.$cardElement),e.addEventListener("change",this.handleCardChange),this.stripeCard=e}},{key:"getCardStyle",value:function(){return{base:{color:"#57575c",fontSize:"16px",fontFamily:"Helvetica, Arial, sans-serif",fontSmoothing:"antialiased","::placeholder":{color:"#8f8f8f"}},invalid:{color:"#ff0000"}}}},{key:"getTokenData",value:function(){return{name:this.$form.querySelector(".js-card-name").value}}},{key:"referencesValid",value:function(){var e=this.getMissingReferences();return!(e.length>0)||(console.error("We have undefined references:",e),!1)}},{key:"getRequiredReferences",value:function(){return["stripe","$cardElement","$paymentErrorExplanation"]}},{key:"getMissingReferences",value:function(){var e=this,t=this.getRequiredReferences();return m()(t,(function(t){return!e[t]}))}}])&&Xe(t.prototype,n),r&&Xe(t,r),Object.defineProperty(t,"prototype",{writable:!1}),i}(Je),ut=ct,lt="gtag-script",st=function(){return document.getElementById(lt)},ft=function(e){if(!st()){var t=document.createElement("script");t.id=lt,t.async="true",t.src="https://www.googletagmanager.com/gtag/js?id=".concat(e);var n=document.getElementsByTagName("script")[0];n.parentNode.insertBefore(t,n)}},pt=function(){var e=st();e&&e.parentNode.removeChild(e)},mt=n(31955),yt="_timetoast_accept_personalized_ads_cookies",dt="_timetoast_accept_statistics_cookies",bt=function(e,t){try{mt.Z.set(e,t,{expires:365})}catch(n){l.Tb(new Error("Failed to set cookie: ".concat(e," to ").concat(t)))}},vt=function(e){try{bt(yt,e),bt(dt,e)}catch(t){l.Tb(new Error("Failed to set all cookies to ".concat(e)))}},ht=function(e){try{mt.Z.get(e)}catch(t){l.Tb(new Error("Failed to read cookie: ".concat(e)))}},gt=bt,wt=function(){vt("true")},Ot=function(){vt("false")},Et=function(e){var t=e.onDone,n=e.onManagePrefs,o="Accept all";return r.createElement("div",{className:"privacy-management-bar"},r.createElement("div",{className:"privacy-management-bar__text"},r.createElement("p",null,"We and our partners will store and/or access personal data on your device through the use of cookies and similar technologies, to display personalised ads, for ad and content measurement, audience insights and product development."),r.createElement("p",null,"By clicking '",o,",' you consent to this, or you can ",r.createElement("a",{onClick:n,href:"#"},"manage your preferences"),".")),r.createElement("div",{className:"privacy-management-bar__actions"},r.createElement(h.Z,{onClick:function(e){Ot(),t()},className:"btn btn--primary qa-reject"},"Reject all"),r.createElement(h.Z,{onClick:function(e){wt(),t()},className:"btn btn--primary qa-accept"},o)))};Et.defaultProps={onDone:v(),onManagePrefs:v()};var jt=Et,Pt=n(36636),St=n(8776);function _t(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(s){l=!0,o=s}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return kt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function kt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Tt=function(e){var t=e.onDone,n=ht(yt)||"false",o=ht(dt)||"false",i=_t((0,r.useState)(n),2),a=i[0],c=i[1],u=_t((0,r.useState)(o),2),l=u[0],s=u[1],f=function(e){gt(yt,a),gt(dt,l),t()};return r.createElement(St.Z,{isActive:!0,onClose:f},r.createElement("div",{className:"modal-card privacy-management"},r.createElement("header",{className:"modal-card__header"},r.createElement("h1",{className:"heading gamma"},"Your choices")),r.createElement("section",{className:"modal-card__body"},r.createElement("div",{className:"privacy-management-section"},r.createElement("div",{className:"privacy-management-section__header"},r.createElement("h2",{className:"heading heading--alternate zeta privacy-management-section__title"},"Necessary cookies"),r.createElement("div",null,r.createElement("strong",null,"Required"))),r.createElement("p",null,"Necessary cookies enable core functionality such as security, network management, and accessibility. You may disable these by changing your browser settings, but this may affect how the website functions.")),r.createElement("div",{className:"privacy-management-section"},r.createElement("div",{className:"privacy-management-section__header"},r.createElement("h2",{className:"heading heading--alternate zeta privacy-management-section__title"},"Statistical cookies"),r.createElement(Pt.Z,{checkedLabel:"Accept",uncheckedLabel:"Reject",value:"true"===l?1:0,onChange:function(){s("true"===l?"false":"true")},className:"labelled-switch labelled-switch--small"})),r.createElement("p",null,"Stastical cookies allow us to see how our site is used and help us improve our sevice. These cookies collect information in a way that does not directly identify anyone.")),r.createElement("div",{className:"privacy-management-section"},r.createElement("div",{className:"privacy-management-section__header"},r.createElement("h2",{className:"heading heading--alternate zeta privacy-management-section__title"},"Personalized ads"),r.createElement(Pt.Z,{checkedLabel:"Accept",uncheckedLabel:"Reject",value:"true"===a?1:0,onChange:function(){c("true"===a?"false":"true")},className:"labelled-switch labelled-switch--small"})),r.createElement("p",null,"With your consent, we will provide a tailored ad experience that we think you'll find interesting and useful. If you do not consent, you will still see ads from us but they will not be personalized for you.")),r.createElement("p",null,"You can find out more about our use of cookies by visiting our ",r.createElement("a",{href:"/privacy"},"privacy policy")," and ",r.createElement("a",{href:"/cookie_policy"},"cookie policy")," pages.")),r.createElement("footer",{className:"modal-card__footer"},r.createElement("div",{className:"modal-card-buttons modal-card-buttons--right"},r.createElement(h.Z,{onClick:function(e){Ot(),t()},className:"btn btn--primary"},"Reject all"),r.createElement(h.Z,{onClick:f,className:"btn btn--primary"},"Confirm choices")))))};function Ct(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i,a,c=[],u=!0,l=!1;try{if(i=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;u=!1}else for(;!(u=(r=i.call(n)).done)&&(c.push(r.value),c.length!==t);u=!0);}catch(s){l=!0,o=s}finally{try{if(!u&&null!=n.return&&(a=n.return(),Object(a)!==a))return}finally{if(l)throw o}}return c}}(e,t)||function(e,t){if(!e)return;if("string"===typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nt(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Rt=function(e){var t=e.triggerMode,n=Ct((0,r.useState)(!1),2),o=n[0],i=n[1],a=Ct((0,r.useState)(!1),2),c=a[0],u=a[1],l=function(e){e.preventDefault(),u(!1),i(!0)},s=function(){var e="true"===ht(yt),t="true"===ht(dt);(window.adsbygoogle=window.adsbygoogle||[]).requestNonPersonalizedAds=e?0:1,t?ft(window.Timetoast.ga4PropertyId):pt(),i(!1),u(!0)};return o?r.createElement(Tt,{onDone:s}):function(){switch(t){case"bar":if(!c)return r.createElement(jt,{onManagePrefs:l,onDone:s});break;case"button":return r.createElement(h.Z,{onClick:l,className:"btn btn--primary"},"Manage your cookie preferences")}return null}()};Rt.defaultProps={triggerMode:"bar"};var Dt={PrivacyManagement:Rt},xt=n(71658);function Zt(e){if(null==e)throw new TypeError("Cannot destructure "+e)}function It(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function Lt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?It(Object(n),!0).forEach((function(t){Bt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):It(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Bt(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function At(){At=function(){return e};var e={},t=Object.prototype,n=t.hasOwnProperty,r=Object.defineProperty||function(e,t,n){e[t]=n.value},o="function"==typeof Symbol?Symbol:{},i=o.iterator||"@@iterator",a=o.asyncIterator||"@@asyncIterator",c=o.toStringTag||"@@toStringTag";function u(e,t,n){return Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}),e[t]}try{u({},"")}catch(T){u=function(e,t,n){return e[t]=n}}function l(e,t,n,o){var i=t&&t.prototype instanceof p?t:p,a=Object.create(i.prototype),c=new S(o||[]);return r(a,"_invoke",{value:O(e,n,c)}),a}function s(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(T){return{type:"throw",arg:T}}}e.wrap=l;var f={};function p(){}function m(){}function y(){}var d={};u(d,i,(function(){return this}));var b=Object.getPrototypeOf,v=b&&b(b(_([])));v&&v!==t&&n.call(v,i)&&(d=v);var h=y.prototype=p.prototype=Object.create(d);function g(e){["next","throw","return"].forEach((function(t){u(e,t,(function(e){return this._invoke(t,e)}))}))}function w(e,t){function o(r,i,a,c){var u=s(e[r],e,i);if("throw"!==u.type){var l=u.arg,f=l.value;return f&&"object"==typeof f&&n.call(f,"__await")?t.resolve(f.__await).then((function(e){o("next",e,a,c)}),(function(e){o("throw",e,a,c)})):t.resolve(f).then((function(e){l.value=e,a(l)}),(function(e){return o("throw",e,a,c)}))}c(u.arg)}var i;r(this,"_invoke",{value:function(e,n){function r(){return new t((function(t,r){o(e,n,t,r)}))}return i=i?i.then(r,r):r()}})}function O(e,t,n){var r="suspendedStart";return function(o,i){if("executing"===r)throw new Error("Generator is already running");if("completed"===r){if("throw"===o)throw i;return k()}for(n.method=o,n.arg=i;;){var a=n.delegate;if(a){var c=E(a,n);if(c){if(c===f)continue;return c}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if("suspendedStart"===r)throw r="completed",n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r="executing";var u=s(e,t,n);if("normal"===u.type){if(r=n.done?"completed":"suspendedYield",u.arg===f)continue;return{value:u.arg,done:n.done}}"throw"===u.type&&(r="completed",n.method="throw",n.arg=u.arg)}}}function E(e,t){var n=t.method,r=e.iterator[n];if(void 0===r)return t.delegate=null,"throw"===n&&e.iterator.return&&(t.method="return",t.arg=void 0,E(e,t),"throw"===t.method)||"return"!==n&&(t.method="throw",t.arg=new TypeError("The iterator does not provide a '"+n+"' method")),f;var o=s(r,e.iterator,t.arg);if("throw"===o.type)return t.method="throw",t.arg=o.arg,t.delegate=null,f;var i=o.arg;return i?i.done?(t[e.resultName]=i.value,t.next=e.nextLoc,"return"!==t.method&&(t.method="next",t.arg=void 0),t.delegate=null,f):i:(t.method="throw",t.arg=new TypeError("iterator result is not an object"),t.delegate=null,f)}function j(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function P(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function S(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(j,this),this.reset(!0)}function _(e){if(e){var t=e[i];if(t)return t.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var r=-1,o=function t(){for(;++r<e.length;)if(n.call(e,r))return t.value=e[r],t.done=!1,t;return t.value=void 0,t.done=!0,t};return o.next=o}}return{next:k}}function k(){return{value:void 0,done:!0}}return m.prototype=y,r(h,"constructor",{value:y,configurable:!0}),r(y,"constructor",{value:m,configurable:!0}),m.displayName=u(y,c,"GeneratorFunction"),e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===m||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,y):(e.__proto__=y,u(e,c,"GeneratorFunction")),e.prototype=Object.create(h),e},e.awrap=function(e){return{__await:e}},g(w.prototype),u(w.prototype,a,(function(){return this})),e.AsyncIterator=w,e.async=function(t,n,r,o,i){void 0===i&&(i=Promise);var a=new w(l(t,n,r,o),i);return e.isGeneratorFunction(n)?a:a.next().then((function(e){return e.done?e.value:a.next()}))},g(h),u(h,c,"Generator"),u(h,i,(function(){return this})),u(h,"toString",(function(){return"[object Generator]"})),e.keys=function(e){var t=Object(e),n=[];for(var r in t)n.push(r);return n.reverse(),function e(){for(;n.length;){var r=n.pop();if(r in t)return e.value=r,e.done=!1,e}return e.done=!0,e}},e.values=_,S.prototype={constructor:S,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(P),!e)for(var t in this)"t"===t.charAt(0)&&n.call(this,t)&&!isNaN(+t.slice(1))&&(this[t]=void 0)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var t=this;function r(n,r){return a.type="throw",a.arg=e,t.next=n,r&&(t.method="next",t.arg=void 0),!!r}for(var o=this.tryEntries.length-1;o>=0;--o){var i=this.tryEntries[o],a=i.completion;if("root"===i.tryLoc)return r("end");if(i.tryLoc<=this.prev){var c=n.call(i,"catchLoc"),u=n.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return r(i.catchLoc,!0);if(this.prev<i.finallyLoc)return r(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return r(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return r(i.finallyLoc)}}}},abrupt:function(e,t){for(var r=this.tryEntries.length-1;r>=0;--r){var o=this.tryEntries[r];if(o.tryLoc<=this.prev&&n.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var i=o;break}}i&&("break"===e||"continue"===e)&&i.tryLoc<=t&&t<=i.finallyLoc&&(i=null);var a=i?i.completion:{};return a.type=e,a.arg=t,i?(this.method="next",this.next=i.finallyLoc,f):this.complete(a)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),f},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),P(n),f}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;P(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,t,n){return this.delegate={iterator:_(e),resultName:t,nextLoc:n},"next"===this.method&&(this.arg=void 0),f}},e}function Mt(e,t,n,r,o,i,a){try{var c=e[i](a),u=c.value}catch(l){return void n(l)}c.done?t(u):Promise.resolve(u).then(r,o)}function zt(e){return function(){var t=this,n=arguments;return new Promise((function(r,o){var i=e.apply(t,n);function a(e){Mt(i,r,o,a,c,"next",e)}function c(e){Mt(i,r,o,a,c,"throw",e)}a(void 0)}))}}var Ft,Ut=Dt.PrivacyManagement,$t=xt.cJ.SearchContainer;window.Timetoast.shared={redirectWithMessage:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"notice",i=document.getElementById("js-redirector-target");i?(0,o.s)(i).render(r.createElement(Ge,{url:e,message:t,type:n})):console.error("Could not locate redirecter target div")},siteSearch:{init:function(e){(0,o.s)(document.getElementById(e)).render(r.createElement(i.zt,{store:je.Z},r.createElement($t,null)))}},stripe:{initStripe:function(e){return zt(At().mark((function t(){var n;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(e){t.next=2;break}throw new Error("Missing Stripe publishable key");case 2:return t.next=4,(0,a.loadStripe)(e);case 4:return n=t.sent,t.abrupt("return",n);case 6:case"end":return t.stop()}}),t)})))()},doHandleCardPayment:function(){var e=arguments;return zt(At().mark((function t(){var n,r,o,i,a,c,u,s,f;return At().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return o=(r=n=e.length>0&&void 0!==e[0]?e[0]:{}).publishableKey,i=r.paymentIntentClientSecret,a=r.routes,c=a.successURL,u=a.failURL,t.next=4,window.Timetoast.shared.stripe.initStripe(o);case 4:s=t.sent,n=Lt(Lt({},n),{},{stripe:s}),null!==(f=document.querySelector(".js-payment-error-explanation"))&&f.classList.add("hidden"),s.handleCardPayment(i).then((function(e){var t=e.error,n=e.paymentIntent;if(t){var r=t.message;window.Timetoast.shared.redirectWithMessage(u,r,"alert"),l.uT("Stripe handleCardPayment auth failure. Message: ".concat(r))}else n&&("succeeded"===n.status?window.Timetoast.shared.redirectWithMessage(c,"Card payment successful. Your subscription will be (re)activated soon, redirecting...","success"):(window.Timetoast.shared.redirectWithMessage(u,"Card payment failed. Code DHCP-1a error. Redirecting...","alert"),l.uT("Stripe handleCardPayment call did not return a paymentIntent in the res object. Code DHCP-1a.")))}),(function(e){window.Timetoast.shared.redirectWithMessage(u,"Card payment failed. Code DHCP-1b error occured handling card payment. Redirecting...","alert"),l.Tb(e)}));case 9:case"end":return t.stop()}}),t)})))()},setupForm:(Ft=zt(At().mark((function e(){var t,n,r,o=arguments;return At().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=(t=o.length>0&&void 0!==o[0]?o[0]:{}).publishableKey,e.next=4,window.Timetoast.shared.stripe.initStripe(n);case 4:r=e.sent,t=Lt(Lt({},t),{},{stripe:r}),new ut(t).init();case 8:case"end":return e.stop()}}),e)}))),function(){return Ft.apply(this,arguments)})},spam:{initSpamReporting:function(){var e=document.querySelectorAll(".js-report-spam-link");u()(e,(function(e){(0,L.wY)(e,(function(t){t.preventDefault(),e.text="Reporting...";var n=function(t){e.text="Reported, thanks!"},r="true"===e.dataset.confirmedSpam;I.Z.createFlag(e.dataset.model,e.dataset.id,r).then(n,n)}))}))},renderSpamHamReviewActions:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"js-spammable-review-actions",t=document.getElementsByClassName(e);u()(t,(function(e){var t=e.dataset,n=t.spammableId,i=t.spammableType;t.className;(0,o.s)(e).render(r.createElement(ve,{spammableId:n,spammableType:i}))}))},renderAdminBarSpammable:function(e,t){var n=Object.assign({},(Zt(t),t));(0,o.s)(document.getElementById(e)).render(r.createElement(we,n))}},privacyManagement:{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"bar",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"js-privacy-management-target",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=document.getElementById(t);(0,o.s)(i).render(r.createElement(Ut,{triggerMode:e,options:n}))}},announcements:{init:function(e,t){(0,o.s)(document.getElementById(e)).render(r.createElement(Z,{options:t}),document.getElementById(e))}},navigations:{init:function(){var e=document.querySelectorAll(".js-menu-takeover");u()(e,(function(e){var t=e.dataset.dataDomId,n=(0,Oe.loadJSONFromDOMNode)(t),i=(0,Ee.k5)(n),a=Object.assign({},(Zt(i),i));(0,o.s)(e).render(r.createElement(Pe.Z,a))}))}},toaster:{init:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"toaster-react-target";(0,o.s)(document.getElementById(e)).render(r.createElement(i.zt,{store:je.Z},r.createElement("div",null,r.createElement(Be,null))))}},initAdLabels:function(){var e=function(){var e=document.getElementsByClassName("reclame");u()(e,(function(e){if(!e.classList.contains("reclame--in-content")){var t=e.getElementsByClassName("ad");if(t.length>0){var n=t[0].firstElementChild;n&&n.clientWidth>0&&n.clientHeight>0&&e.classList.add("reclame--filled")}}}))};e(),setInterval(e,1e3)}}},490:function(e,t,n){"use strict";n.r(t);var r=n(67294),o=n(20745),i=n(48863),a=n(59416),c=n(45397),u=n(33512),l=n(20628),s=n(81683),f=n(74803),p=n(41521);function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function y(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){d(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function d(e,t,n){return(t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var b=(0,r.lazy)((function(){return Promise.all([n.e(940),n.e(42)]).then(n.bind(n,40042)).then((function(e){return{default:e.TimelineEditorContainer}}))}));window.Timetoast.timelines=y(y({},window.Timetoast.timelines),{},{edit:{init:function(e){var t=e.data.raw,n=t.timelineId,m=t.categoriesData,y=e.data.dom.editableTimeline,d=e.data.raw.headActions.mode;(0,c.hydrateCurrentUser)(),(0,c.hydrateCategoriesFromJSON)(m),(0,c.hydrateCompleteTimelineFromDOMNode)(y);var v=(0,p.ts)(i.Z.getState()),h=(0,f.Z)(v);(0,o.s)(document.getElementById(e.targets.headActions)).render(r.createElement(a.zt,{store:i.Z},r.createElement(s.v.Provider,{value:h},r.createElement(l.Z,{timelineId:n,mode:d,wantedActions:["read","moderate"]}))));(0,o.s)(document.getElementById(e.targets.editor)).render(r.createElement(a.zt,{store:i.Z},r.createElement(r.Suspense,{fallback:r.createElement("div",{className:"panel-section panel-section--padded"},r.createElement(u.Z,{size:"large"}))},r.createElement(b,{timelineId:e.data.raw.timelineId}))))}}})},34893:function(e,t,n){"use strict";n.r(t);var r=n(67294),o=n(20745),i=n(48863),a=n(59416),c=n(24268),u=n(27361),l=n.n(u),s=n(12243),f=n(96863),p=n(97828),m=n(20628),y=n(14205),d=n(42513),b=n(35161),v=n.n(b),h=n(50308),g=n.n(h),w=n(94184),O=n.n(w),E=function(e){var t=e.value,n=e.label,o=e.isActive,i=e.onClick,a=O()("pillbox",{"pillbox--active":o});return r.createElement("div",{role:"button","aria-label":n,className:a,onClick:function(e){i(t)}},n)};function j(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,C(r.key),r)}}function P(e,t){return P=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},P(e,t)}function S(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=k(e);if(t){var o=k(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return _(e)}(this,n)}}function _(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function k(e){return k=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},k(e)}function T(e,t,n){return(t=C(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function C(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var N=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&P(e,t)}(a,e);var t,n,o,i=S(a);function a(){var e;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a);for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return T(_(e=i.call.apply(i,[this].concat(n))),"handleClick",(function(t){var n=e.props,r=n.namespace,o=n.scope;(0,n.onChange)(r,o,t)})),e}return t=a,(n=[{key:"render",value:function(){var e=this,t=this.props,n=t.namespace,o=t.scope,i=t.options,a=t.value;if(i.length>=2){var c=v()(i,(function(t){var i=a===t.value;return r.createElement(E,{value:t.value,label:t.label,onClick:e.handleClick,isActive:i,key:"pillbox-".concat(n,"-").concat(o,"-").concat(t.value)})}));return r.createElement("div",{className:"pillboxes"},c)}return null}}])&&j(t.prototype,n),o&&j(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);T(N,"defaultProps",{namespace:"pillbox-menu",scope:Math.random(),options:[],value:null,onChange:g()});var R={PillboxMenuContainer:(0,a.$j)((function(e,t){return{namespace:t.namespace,scope:t.scope,options:y.wl.getOptions(e,t),value:y.wl.getValue(e,t)}}),(function(e){return{onChange:function(t,n,r){var o={namespace:t,scope:n,value:r};e(y.Nw.changeValue(o))}}}))(N)},D=n(93684),x=n(76700),Z=n(49959),I=n(58872),L=n(5826),B={},A=function(e,t){var n={rating:{timeline_id:e,value:t}},r="create-rating-".concat(e);return B[r]?Promise.reject(new Error(I.Z.CALL_ALREADY_IN_PROGRESS)):(B[r]=!0,L.Z.post("/api/v1/ratings",n).finally((function(){delete B[r]})))},M=n(20036);function z(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,q(r.key),r)}}function F(e,t){return F=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},F(e,t)}function U(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=V(e);if(t){var o=V(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return $(e)}(this,n)}}function $(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function V(e){return V=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},V(e)}function H(e,t,n){return(t=q(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function q(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Y=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&F(e,t)}(a,e);var t,n,o,i=U(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),H($(t=i.call(this,e)),"registerRating",(function(e){var n=t.props.timeline.id;t.setState({ratingValue:e},(function(){A(n,e).then((function(e){var n=(0,M.Z)(e);200==n.status||t.setState({ratingError:n.body.data.message})}),(function(e){(0,M.Z)(e.response);console.log(e.message)}))}))})),H($(t),"handleUpClick",(function(e){t.registerRating(1)})),H($(t),"handleDownClick",(function(e){t.registerRating(0)})),t.state={ratingValue:null,ratingError:null},t}return t=a,(n=[{key:"render",value:function(){var e=this.state.ratingValue,t=O()("rating__button","qa-upvote",{"rating__button--active":1===e}),n="Upvote",o=O()("rating__button","qa-downvote",{"rating__button--active":0===e}),i="Downvote";return r.createElement("div",{className:"rating"},r.createElement("div",{role:"button","aria-label":n,title:n,className:o,onClick:this.handleDownClick},r.createElement(Z.Z,{alt:"Thumb up",pointerEvents:"none",className:"no-fill",xlinkHref:"#streamline-core-line-like-1"})),r.createElement("div",{role:"button","aria-label":i,title:i,className:t,onClick:this.handleUpClick},r.createElement(Z.Z,{alt:"Thumb down",pointerEvents:"none",className:"no-fill",xlinkHref:"#streamline-core-line-dislike-1"})))}}])&&z(t.prototype,n),o&&z(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component),Q={RatingContainer:(0,a.$j)((function(e,t){return{timeline:(0,x.VS)(e,t)}}),(function(e){return{}}))(Y)},G=n(95597),W=n(47489);function K(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,re(r.key),r)}}function J(e,t){return J=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},J(e,t)}function X(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=te(e);if(t){var o=te(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return ee(e)}(this,n)}}function ee(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function te(e){return te=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},te(e)}function ne(e,t,n){return(t=re(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function re(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var oe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&J(e,t)}(a,e);var t,n,o,i=X(a);function a(e){var t;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),ne(ee(t=i.call(this,e)),"handleSmallClick",(function(){t.handleSizeChange(f.HC)})),ne(ee(t),"handleMediumClick",(function(){t.handleSizeChange(f.M2)})),ne(ee(t),"handleLargeClick",(function(){t.handleSizeChange(f.ln)})),ne(ee(t),"handleFullscreenClick",(function(e){var n=t.props,r=n.namespace,o=n.scope,i=n.onChange,a=n.viewSize;if(W.Z.isEnabled){var c=document.getElementById("timeline-fullscreenable");t.prevSize=a,W.Z.request(c),i(r,o,f.KO)}else i(r,o,f.ln)})),ne(ee(t),"handleScreenfullChange",(function(e){if(!W.Z.isFullscreen){var n=t.props,r=n.namespace,o=n.scope;(0,n.onChange)(r,o,t.prevSize||f.HC)}})),t.state={fullscreenEnabled:W.Z.isEnabled};var n=e.namespace,r=e.viewSize;return t.prevSize=r,t.boundScreenfullChangeHandler=t.handleScreenfullChange.bind(ee(t),n),W.Z.isEnabled&&W.Z.on("change",t.boundScreenfullChangeHandler),t}return t=a,n=[{key:"componentWillUnmount",value:function(){W.Z.isEnabled&&W.Z.off("change",this.boundScreenfullChangeHandler)}},{key:"handleSizeChange",value:function(e){var t=this.props,n=t.namespace,r=t.scope;(0,t.onChange)(n,r,e)}},{key:"getLargestSizeButtonContent",value:function(){var e=this.props,t=e.viewSize,n=e.allowFullscreenControl,o=this.state.fullscreenEnabled;if(n){var i,a,c,u=r.createElement("div",{className:"size-button-icon size-button-icon--fullscreen"},r.createElement("span",{className:"corner corner--tl"}),r.createElement("span",{className:"corner corner--tr"}),r.createElement("span",{className:"corner corner--br"}),r.createElement("span",{className:"corner corner--bl"}));return o?(i="Fullscreen mode",a=this.handleFullscreenClick,c=t===f.KO):(i="Large view",a=this.handleLargeClick,c=t===f.ln),r.createElement("div",{role:"button",onClick:a,className:O()("size-button","size-button--large",{"size-button--selected":c},"hint hint--top-left hint--timetoast"),"aria-label":i},u)}return null}},{key:"render",value:function(){var e=this.props.viewSize,t=this.getLargestSizeButtonContent();return r.createElement("div",{className:"timeline-size-buttons"},r.createElement("div",{role:"button",onClick:this.handleSmallClick,className:O()("size-button","size-button--small",{"size-button--selected":e===f.HC},"hint hint--top-left hint--timetoast"),"aria-label":"Default view"},r.createElement("div",{className:"size-button-icon"})),r.createElement("div",{role:"button",onClick:this.handleMediumClick,className:O()("size-button","size-button--medium",{"size-button--selected":e===f.M2},"hint hint--top-left hint--timetoast"),"aria-label":"Wide view"},r.createElement("div",{className:"size-button-icon"})),t)}}],n&&K(t.prototype,n),o&&K(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component),ie=(0,a.$j)((function(e,t){var n=t.namespace,r=t.scope,o=y.wl.getValue(e,{namespace:n,scope:"viewType"})===G.jN;return{namespace:n,scope:r,viewSize:y.wl.getValue(e,{namespace:n,scope:"viewSize"}),allowFullscreenControl:o}}),(function(e){return{onChange:function(t,n,r){var o={namespace:t,scope:n,value:r};e(y.Nw.changeValue(o))}}}))(oe),ae=n(47171),ce=n(41062),ue=n(75563),le=n(35388);function se(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===typeof i?i:String(i)),r)}var o,i}function fe(e,t){return fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},fe(e,t)}function pe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=me(e);if(t){var o=me(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function me(e){return me=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},me(e)}var ye="with-content-ads",de=ce.c.ListTimelineContainer,be=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&fe(e,t)}(a,e);var t,n,o,i=pe(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e)).updateInTimelineAdClass(),t}return t=a,(n=[{key:"getSnapshotBeforeUpdate",value:function(){return this.updateInTimelineAdClass(),null}},{key:"componentDidUpdate",value:function(){}},{key:"updateInTimelineAdClass",value:function(){this.props.viewType===G.IY?this.addInTimelineAdClass():this.removeInTimelineAdClass()}},{key:"getBodyEl",value:function(){return document.getElementsByTagName("body")[0]}},{key:"addInTimelineAdClass",value:function(){var e=this.getBodyEl();e&&!e.classList.contains(ye)&&e.classList.add(ye)}},{key:"removeInTimelineAdClass",value:function(){var e=this.getBodyEl();e&&e.classList.contains(ye)&&e.classList.remove(ye)}},{key:"getListTimelineContent",value:function(){var e=this.props,t=e.timelineId,n=e.environment;return r.createElement(de,{timelineId:t,environment:n})}},{key:"getHorizontalTimelineContent",value:function(){var e=this.props,t=e.timelineId,n=e.namespace;return r.createElement(ue.Z,{namespace:n,timelineId:t})}},{key:"getContent",value:function(){switch(this.props.viewType){case G.jN:return this.getHorizontalTimelineContent();case G.IY:return this.getListTimelineContent();default:console.warn("Unrecognized view type passed to timeline switcher")}}},{key:"render",value:function(){var e=this.props,t=e.viewType,n=e.viewSize,o=e.colorScheme,i=n===f.HC||n===f.M2||n===f.ln,a=O()("view","view--size-".concat(n),"view--type-".concat(t),{"view--with-top-bottom-border":i});return r.createElement(le.N.Provider,{value:o},r.createElement("div",{className:a},this.getContent()))}}])&&se(t.prototype,n),o&&se(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);be.defaultProps={viewType:G.jN,viewSize:f.HC};var ve=(0,a.$j)((function(e,t){var n=t.namespace,r=(0,ae.KF)(e),o=y.wl.getValue(e,{namespace:n,scope:"viewSize"});return{viewType:y.wl.getValue(e,{namespace:n,scope:"viewType"}),viewSize:o,colorScheme:r}}),(function(e){return{}}))(be),he=n(66604),ge=n.n(he),we=n(89734),Oe=n.n(we),Ee=n(49316),je=n(50740),Pe=n(52983),Se=n(73959);function _e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===typeof i?i:String(i)),r)}var o,i}function ke(e,t){return ke=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},ke(e,t)}function Te(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ce(e);if(t){var o=Ce(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ce(e){return Ce=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ce(e)}var Ne=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&ke(e,t)}(a,e);var t,n,o,i=Te(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"getReportSpamContent",value:function(){var e=this.props.comment;return e.comment.match(/http/)?r.createElement(Se.Z,{resourceName:"Comment",resourceId:e.id,className:"unbutton comment__spam-reporter"}):null}},{key:"getBylineContent",value:function(){var e=this.props.comment;if(this.showAsDeleted())return r.createElement("span",null,"[Comment removed]");var t=this.getReportSpamContent(),n=new Date(e.created_at),o=(0,Ee.Z)(n,new Date,{addSuffix:!0}),i=e.user;return r.createElement("span",null,r.createElement(Pe.Z,{href:i.profile_link,title:"".concat(i.display_name,"'s profile page")},(0,je.$G)(i.display_name))," ",r.createElement("span",{className:"comment__time-ago"},o),t)}},{key:"getBodyContent",value:function(){var e=this.props.comment;return this.showAsDeleted()?"This comment has been removed.":e.comment}},{key:"showAsDeleted",value:function(){return null!==this.props.comment.spam_locked_at}},{key:"render",value:function(){var e=this.getBylineContent(),t=this.getBodyContent();return r.createElement("li",{className:"comment","data-testid":"qa-comment-list-item"},r.createElement("div",{className:"comment__byline"},e),r.createElement("div",{className:"comment__body","data-testid":"qa-comment-text"},t))}}])&&_e(t.prototype,n),o&&_e(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.PureComponent);function Re(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===typeof i?i:String(i)),r)}var o,i}function De(e,t){return De=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},De(e,t)}function xe(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ze(e);if(t){var o=Ze(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function Ze(e){return Ze=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ze(e)}var Ie=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&De(e,t)}(a,e);var t,n,o,i=xe(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"getCommentItems",value:function(){var e=this.props.comments,t=Oe()(Object.values(e),(function(e){return new Date(e.created_at)}));return v()(t,(function(e){var t="comment-".concat(e.id);return r.createElement(Ne,{key:t,comment:e})}))}},{key:"getContent",value:function(){var e=this.props.comments;if(0===Object.keys(e).length)return r.createElement("p",null,"There are no comments yet.");var t=this.getCommentItems();return r.createElement("ol",{className:"comments-list"},t)}},{key:"render",value:function(){return r.createElement("section",{className:"timeline-comments__comments"},r.createElement("h1",{className:"heading timeline-comments__heading"},"Comments"),this.getContent())}}])&&Re(t.prototype,n),o&&Re(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component),Le=n(33203),Be=n(46295),Ae=n(89727),Me=n(31609);function ze(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===typeof i?i:String(i)),r)}var o,i}function Fe(e,t){return Fe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Fe(e,t)}function Ue(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=$e(e);if(t){var o=$e(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function $e(e){return $e=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},$e(e)}var Ve=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fe(e,t)}(a,e);var t,n,o,i=Ue(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props.path;return r.createElement("div",{className:"timeline-comments__new-comment"},r.createElement("h4",{className:"heading"},"Leave a comment"),r.createElement(Le.Z,{className:"form",action:e,ignoreMissingSubmitHandler:!0},r.createElement(Me.Z,null),r.createElement(Be.Z,null,r.createElement(Ae.Z,{id:"comment_comment",name:"comment[comment]",className:"textarea"}),r.createElement("div",{className:"tip"},"You can add html links, but they must include 'http://'")),r.createElement(Be.Z,{className:"form-group form-group-buttons form-group-buttons--left"},r.createElement("div",{className:"form-group-buttons__container"},r.createElement("input",{className:"btn btn--primary",type:"submit",value:"Add Comment +",name:"commit"})))))}}])&&ze(t.prototype,n),o&&ze(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component),He=n(33512),qe=n(14002);function Ye(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Je(r.key),r)}}function Qe(e,t){return Qe=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},Qe(e,t)}function Ge(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Ke(e);if(t){var o=Ke(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return We(e)}(this,n)}}function We(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Ke(e){return Ke=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Ke(e)}function Je(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Xe=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qe(e,t)}(a,e);var t,n,o,i=Ge(a);function a(e){var t,n,r,o;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),t=i.call(this,e),n=We(t),o=function(e){e.preventDefault();var n=t.props,r=n.timelineId;(0,n.onClickLoadComments)(r),setTimeout((function(){t.setState({minDelayComplete:!0})}),400),t.setState({status:"expanded"})},(r=Je(r="handleLoadCommentsClick"))in n?Object.defineProperty(n,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[r]=o,t.state={status:"collapsed",minDelayComplete:!1},t}return t=a,(n=[{key:"getCommentsContent",value:function(){var e=this.props,t=e.timelineCommentsLoadStatus,n=e.comments,o=this.state,i=o.status,a=o.minDelayComplete;if("expanded"===i){if(a)switch(t){case"failure":return r.createElement("div",{className:"timeline-comments__failed-to-load"},"Failed to load comments");case"success":var c=this.getNewCommentFormContent();return r.createElement("div",null,r.createElement(Ie,{comments:n}),c)}return r.createElement("div",{className:"timeline-comments__progress-indicator"},r.createElement(He.Z,null))}return null}},{key:"getLoadCommentsButtonContent",value:function(){return"unstarted"===this.props.timelineCommentsLoadStatus?r.createElement(qe.Z,{onClick:this.handleLoadCommentsClick,className:"timeline-comments__load-comments",title:"Show this timeline's comments"},"Show comments"):null}},{key:"getNewCommentFormContent",value:function(){var e=this.props,t=e.canComment,n=e.createCommentPath;return t?r.createElement(Ve,{path:n}):null}},{key:"render",value:function(){var e=this.state.status,t=this.getLoadCommentsButtonContent(),n=this.getCommentsContent(),o=O()("timeline-comments","timeline-comments--".concat(e));return r.createElement("div",{className:o},t,n)}}])&&Ye(t.prototype,n),o&&Ye(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);Xe.defaultProps={onClickLoadComments:g(),comments:{},canComment:!1};var et=n(46784),tt=n(30303),nt=n(41521);function rt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function ot(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?rt(Object(n),!0).forEach((function(t){it(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):rt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function it(e,t,n){return t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var at=(0,a.$j)((function(e){var t=e.data.comments,n=(0,tt.o)(e,{}),r=(0,nt.Rf)(e);return{timelineCommentsLoadStatus:n,comments:ge()(t,(function(e){var t=e.user.toString(),n=r[t];return ot(ot({},e),{},{user:n})}))}}),(function(e){return{onClickLoadComments:function(t){return e((0,et.xZ)(t))}}}))(Xe);var ct=n(10593),ut=n(70666);function lt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,(o=r.key,i=void 0,i=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(o,"string"),"symbol"===typeof i?i:String(i)),r)}var o,i}function st(e,t){return st=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},st(e,t)}function ft(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=pt(e);if(t){var o=pt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}(this,n)}}function pt(e){return pt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},pt(e)}var mt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&st(e,t)}(a,e);var t,n,o,i=ft(a);function a(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),i.apply(this,arguments)}return t=a,(n=[{key:"render",value:function(){var e=this.props,t=e.path,n=e.name;return r.createElement(Pe.Z,{className:"tag tag--is-square",href:t,title:"Timelines tagged with ".concat(n)},(0,je.$G)(n,24))}}])&&lt(t.prototype,n),o&&lt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.PureComponent);function yt(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,wt(r.key),r)}}function dt(e,t){return dt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},dt(e,t)}function bt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=ht(e);if(t){var o=ht(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return vt(e)}(this,n)}}function vt(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function ht(e){return ht=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},ht(e)}function gt(e,t,n){return(t=wt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function wt(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var Ot=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&dt(e,t)}(a,e);var t,n,o,i=bt(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),gt(vt(t=i.call(this,e)),"handleAddTagClick",(function(e){e.preventDefault(),t.revealAllTags(),t.props.onClickAddTag()})),gt(vt(t),"handleShowMoreClick",(function(e){e.preventDefault();var n=t.state.maxVisibleTags+20;t.setState({maxVisibleTags:n})})),t.state={maxVisibleTags:4},t}return t=a,(n=[{key:"revealAllTags",value:function(){var e=this.props.tags.length;this.setState({maxVisibleTags:e})}},{key:"getTagsContent",value:function(){var e=this.props,t=e.tags,n=e.showAddTag,o=this.state.maxVisibleTags,i=t.length-o,a=i>0,c=a?t.slice(0,o):t,u=v()(c,(function(e){return r.createElement(ct.Z,{key:"tag-".concat(e.name),classNames:"fade-in-out",timeout:600},r.createElement(mt,{path:e.path,name:e.name}))}));if(a){var l=i>20?20:i;u.push(r.createElement(ct.Z,{key:"show-more",classNames:"fade-in-out",timeout:600},r.createElement(qe.Z,{className:"unbutton tag tag--is-square timeline-tags__more",title:"Show next ".concat(l," tags"),onClick:this.handleShowMoreClick},"+",i," more")))}return n&&u.push(r.createElement(ct.Z,{key:"add-tag",classNames:"fade-in-out",timeout:600},r.createElement(qe.Z,{className:"unbutton tag tag--is-square timeline-tags__add",title:"Add timeline tags +",onClick:this.handleAddTagClick},"Add tags +"))),u}},{key:"render",value:function(){var e=this.getTagsContent();return r.createElement(ut.Z,{component:"div",className:"tags"},e)}}])&&yt(t.prototype,n),o&&yt(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);Ot.defaultProps={tags:[],showAddTag:!1,onClickAddTag:g()};var Et=n(94308),jt=n(57463),Pt=n(83038),St=n(16481);function _t(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,Dt(r.key),r)}}function kt(e,t){return kt=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(e,t){return e.__proto__=t,e},kt(e,t)}function Tt(e){var t=function(){if("undefined"===typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"===typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=Nt(e);if(t){var o=Nt(this).constructor;n=Reflect.construct(r,arguments,o)}else n=r.apply(this,arguments);return function(e,t){if(t&&("object"===typeof t||"function"===typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return Ct(e)}(this,n)}}function Ct(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Nt(e){return Nt=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Nt(e)}function Rt(e,t,n){return(t=Dt(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dt(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}var xt=function(e){!function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&kt(e,t)}(a,e);var t,n,o,i=Tt(a);function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),Rt(Ct(t=i.call(this,e)),"toggleFormVisibility",(function(){t.setState({showTagForm:!t.state.showTagForm})})),Rt(Ct(t),"handleFieldChange",(function(e){e.name;var n=e.value;t.setState({inputValue:n})})),Rt(Ct(t),"handleClickDismiss",(function(e){e.preventDefault(),t.toggleFormVisibility()})),Rt(Ct(t),"handleSubmit",(function(e){return t.setState({submitting:!0}),!0})),t.state={showTagForm:!1,inputValue:"",submitting:!1},t}return t=a,(n=[{key:"getTagsContent",value:function(){var e=this.props,t=e.tags,n=e.canTag;return this.state.showTagForm,r.createElement(Ot,{tags:t,onClickAddTag:this.toggleFormVisibility,showAddTag:n})}},{key:"getTagFormContent",value:function(){var e=this.props,t=e.canTag,n=e.createTagsPath,o=e.timelineId,i=this.state,a=i.showTagForm,c=i.inputValue,u=i.submitting;return a&&t?r.createElement(ct.Z,{classNames:"slide-in-out-300px",timeout:600},r.createElement("div",{className:"timeline-tags__form-container"},r.createElement(qe.Z,{className:"unbutton dismiss-button right",onClick:this.handleClickDismiss},r.createElement(Z.Z,{pointerEvents:"none",alt:"Close",xlinkHref:"#streamline-core-line-delete-1"})),r.createElement(Le.Z,{className:"form",action:n,onSubmit:this.handleSubmit},r.createElement("p",null,"Tags will help people find this timeline when browsing the site."),r.createElement(St.Z,{name:"taggable_type",value:"Timeline"}),r.createElement(St.Z,{name:"taggable_id",value:o}),r.createElement(Me.Z,null),r.createElement(Be.Z,{className:"form-group"},r.createElement(Et.Z,{htmlFor:"tag-input",className:"label"},"Timeline tags"),r.createElement(jt.Z,{id:"tag-input",name:"tag",value:c,onChange:this.handleFieldChange,placeholder:"Comma separate tags e.g. history, civil war, world etc."})),r.createElement(Be.Z,{className:"form-group form-group-buttons form-group-buttons--left"},r.createElement("div",{className:"form-group-buttons__container"},r.createElement(Pt.Z,{className:"btn btn--primary",disabled:u,name:"submit",type:"submit"},"Add these timeline tags +")))))):null}},{key:"render",value:function(){var e=this.props,t=e.tags,n=e.canTag;if(t.length>0||n){var o=this.getTagsContent(),i=this.getTagFormContent();return r.createElement("div",{className:"timeline-tags"},o,r.createElement(ut.Z,null,i))}return null}}])&&_t(t.prototype,n),o&&_t(t,o),Object.defineProperty(t,"prototype",{writable:!1}),a}(r.Component);xt.defaultProps={tags:[],canTag:!1};var Zt=(0,a.$j)((function(e,t){var n=t.canTag,r=t.createTagsPath,o=t.timelineId,i=function(e,t){return e.data.tags}(e);return{tags:i,canTag:n,createTagsPath:r,timelineId:o}}),(function(e){return{}}))(xt),It=n(84672),Lt=n(45397),Bt=n(74803),At=n(81683);function Mt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function zt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Mt(Object(n),!0).forEach((function(t){Ft(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ft(e,t,n){return t=function(e){var t=function(e,t){if("object"!==typeof e||null===e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!==typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}(e,"string");return"symbol"===typeof t?t:String(t)}(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ut=It.c.CommentModerationContainer,$t=R.PillboxMenuContainer;window.Timetoast.timelines=zt(zt({},window.Timetoast.timelines),{},{index:{init:function(e){var t=d.cJ.IndexTabContentContainer;(0,Lt.hydrateCurrentUser)(),(0,Lt.hydrateCategoriesFromJSON)(e.data.raw.categoriesData),(0,o.s)(document.getElementById(e.targets.tabContent)).render(r.createElement(a.zt,{store:i.Z},r.createElement(t,null)))}},groupIndex:{init:function(e){var t=D.cJ.IndexTabContentContainer;(0,Lt.hydrateCurrentUser)(),(0,Lt.hydrateGroupFromDOMNode)(e.data.dom.groupData);var n=e.data.raw.groupId,c=D.Sf.setupGroup;i.Z.dispatch(c(n)),(0,o.s)(document.getElementById(e.targets.tabContent)).render(r.createElement(a.zt,{store:i.Z},r.createElement(t,{groupId:n})))}},show:{init:function(e){var t=e.data,n=t.raw,u=n.timelineId,d=n.environment,b=n.showAds,v=t.raw.headActions.mode,h=t.dom,g=h.timelineData,w=h.tagsData,O="timeline-".concat((0,c.x0)()),E=(i.Z.dispatch((0,s.o)()),t.raw.viewType.steps),j=t.raw.viewType.viewType;i.Z.dispatch(y.Nw.initialize({namespace:O,scope:"viewType",options:E,value:j}));var P=[f.HC,f.M2,f.ln,f.KO],S=t.raw.viewSize.size;i.Z.dispatch(y.Nw.initialize({namespace:O,scope:"viewSize",options:P,value:S})),(0,Lt.hydrateCurrentUser)(),(0,Lt.hydrateTagsFromDOMNode)(w),(0,Lt.hydrateCompleteTimelineFromDOMNode)(g),i.Z.dispatch((0,p.V)(b));var _=(0,nt.ts)(i.Z.getState()),k=(0,Bt.Z)(_);if((0,o.s)(document.getElementById(e.targets.timeline)).render(r.createElement(a.zt,{store:i.Z},r.createElement(ve,{timelineId:u,namespace:O,environment:d}))),(0,o.s)(document.getElementById(e.targets.viewType)).render(r.createElement(a.zt,{store:i.Z},r.createElement($t,{namespace:O,scope:"viewType"}))),(0,o.s)(document.getElementById(e.targets.viewSize)).render(r.createElement(a.zt,{store:i.Z},r.createElement(ie,{namespace:O,scope:"viewSize"}))),l()(e,["data","raw","rating","canRate"],!1)){var T=Q.RatingContainer;(0,o.s)(document.getElementById(e.targets.timelineRating)).render(r.createElement(a.zt,{store:i.Z},r.createElement(T,{timelineId:u})))}(0,o.s)(document.getElementById(e.targets.timelineComments)).render(r.createElement(a.zt,{store:i.Z},r.createElement(at,{timelineId:u,canComment:e.data.raw.comments.canComment,createCommentPath:e.data.raw.comments.createCommentPath}))),(0,o.s)(document.getElementById(e.targets.timelineTags)).render(r.createElement(a.zt,{store:i.Z},r.createElement(Zt,{timelineId:u,canTag:e.data.raw.tags.canTag,createTagsPath:e.data.raw.tags.createTagsPath}))),(0,o.s)(document.getElementById(e.targets.headActions)).render(r.createElement(a.zt,{store:i.Z},r.createElement(At.v.Provider,{value:k},r.createElement(m.Z,{timelineId:u,mode:v,wantedActions:["edit","moderate"]}))))}},moderate:{init:function(e,t){(0,Lt.hydrateCommentsFromDOMNode)(e.data.dom.commentsData),(0,o.s)(t).render(r.createElement(a.zt,{store:i.Z},r.createElement("div",null,r.createElement(Ut,null))))}}})},13058:function(e,t,n){"use strict";n.d(t,{TN:function(){return i},iM:function(){return a},wY:function(){return c}});var r=n(50308),o=n.n(r);function i(e){document.body.addEventListener("click",e),document.body.addEventListener("touchend",e)}function a(e){document.body.removeEventListener("click",e),document.body.removeEventListener("touchend",e)}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o();e&&(e.addEventListener("click",t),e.addEventListener("touchend",t))}},44385:function(e,t,n){n(45397),n(48351),n(41226),n(2932),n(3877),n(30966),n(17254),n(75993),n(20537)},30966:function(e,t,n){"use strict";n.r(t);t.default=function(){this.pages={},this.totalpages=1,this.addPage=function(e){this.pages[e.id]=e,this.totalPages=e.pagination.total_pages},this.getPage=function(e){return this.pages[e]}}},17254:function(){window.Timetoast.utils=Timetoast.utils||{},window.Timetoast.utils.rollout={betaEnabled:function(){return"true"===document.documentElement.dataset.betaEnabled}}},23502:function(e,t,n){"use strict";function r(e){return function(e){if(Array.isArray(e))return o(e)}(e)||function(e){if("undefined"!==typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||function(e,t){if(!e)return;if("string"===typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{Z:function(){return a}});var i=new Map;function a(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"default";i.has(e)||i.set(e,new Map);var t=i.get(e);return{register:function(e,n){t.set(e,n)},getItem:function(e){return t.get(e)},hasItem:function(e){return t.has(e)},getNames:function(){return r(t.keys())},getValues:function(){return r(t.values())}}}}},function(e){e.O(0,[339,52,212,58,931,565],(function(){return t=83992,e(e.s=t);var t}));e.O()}]);
//# sourceMappingURL=application-4d0e70f8c65512a29207.js.map